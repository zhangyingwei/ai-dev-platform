<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目详情 - AI开发平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Monaco Editor CDN -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/styles.css">

    <!-- VSCode精确样式 -->
    <style>
        /* VSCode Dark Theme 精确颜色 */
        :root {
            --vscode-titlebar-bg: #3c3c3c;
            --vscode-titlebar-fg: #cccccc;
            --vscode-activitybar-bg: #333333;
            --vscode-activitybar-fg: #ffffff;
            --vscode-activitybar-inactive-fg: #ffffff66;
            --vscode-activitybar-border: #2b2b2b;
            --vscode-sidebar-bg: #252526;
            --vscode-sidebar-fg: #cccccc;
            --vscode-sidebar-border: #2b2b2b;
            --vscode-editor-bg: #1e1e1e;
            --vscode-editor-fg: #d4d4d4;
            --vscode-panel-bg: #181818;
            --vscode-panel-border: #2b2b2b;
            --vscode-statusbar-bg: #007acc;
            --vscode-statusbar-fg: #ffffff;
            --vscode-tab-active-bg: #1e1e1e;
            --vscode-tab-inactive-bg: #2d2d30;
            --vscode-tab-border: #2b2b2b;
            --vscode-button-bg: #0e639c;
            --vscode-button-hover-bg: #1177bb;
            --vscode-input-bg: #3c3c3c;
            --vscode-input-border: #3c3c3c;
            --vscode-list-hover-bg: #2a2d2e;
            --vscode-list-active-bg: #094771;
            --vscode-scrollbar-bg: #79797966;
            --vscode-scrollbar-hover-bg: #646464b3;
        }

        /* VSCode字体设置 */
        .vscode-font {
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }

        .vscode-ui-font {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 13px;
            line-height: 1.4;
        }

        /* VSCode滚动条样式 */
        .vscode-scrollbar::-webkit-scrollbar {
            width: 14px;
            height: 14px;
        }

        .vscode-scrollbar::-webkit-scrollbar-thumb {
            background-color: var(--vscode-scrollbar-bg);
            border-radius: 0;
        }

        .vscode-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: var(--vscode-scrollbar-hover-bg);
        }

        .vscode-scrollbar::-webkit-scrollbar-track {
            background-color: transparent;
        }

        .vscode-scrollbar::-webkit-scrollbar-corner {
            background-color: transparent;
        }

        /* VSCode精确尺寸 */
        .vscode-titlebar {
            height: 30px;
        }

        .vscode-menubar {
            height: 30px;
        }

        .vscode-activitybar {
            width: 48px;
        }

        .vscode-sidebar {
            width: 300px;
        }

        .vscode-statusbar {
            height: 22px;
        }

        .vscode-tab {
            height: 35px;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))"
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))"
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))"
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))"
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))"
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))"
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))"
                        },
                        success: '#10b981',
                        warning: '#f59e0b',
                        blue: '#3b82f6',
                        green: '#10b981',
                        red: '#ef4444',
                        yellow: '#f59e0b',
                        purple: '#8b5cf6',
                        gray: '#6b7280',
                        'success-foreground': '#ffffff',
                        'warning-foreground': '#ffffff',
                        'destructive-foreground': '#ffffff'
                    },
                    fontFamily: {
                        'sans': ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'],
                        'mono': ['SFMono-Regular', 'Consolas', 'Liberation Mono', 'Menlo', 'Courier', 'monospace']
                    },
                    fontSize: {
                        'xs': '10px',
                        'sm': '12px',
                        'base': '14px',
                        'lg': '16px',
                        'xl': '18px',
                        '2xl': '20px',
                        '3xl': '24px',
                        '4xl': '30px',
                        '5xl': '38px'
                    },
                    spacing: {
                        'xs': '4px',
                        'sm': '8px',
                        'md': '16px',
                        'lg': '24px',
                        'xl': '32px',
                        'xxl': '48px'
                    },
                    borderRadius: {
                        'sm': '2px',
                        'base': '6px',
                        'lg': '8px',
                        'xl': '12px'
                    },
                    boxShadow: {
                        'sm': '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
                        'base': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
                        'md': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'lg': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                        'xl': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'focus': '0 0 0 3px rgba(0, 0, 0, 0.1)'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-background text-foreground">
    <div class="min-h-screen flex">
        <!-- 侧边栏 -->
        <div id="sidebar" class="w-64 bg-card border-r border-border flex flex-col transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out fixed lg:relative z-40 h-full">
            <!-- Logo区域 -->
            <div class="p-4 border-b border-border">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-primary-foreground" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-lg font-bold">AI开发平台</span>
                </div>
            </div>

            <!-- 导航菜单 -->
            <nav class="flex-1 p-3 space-y-1">
                <div class="mb-3">
                    <p class="text-xs font-medium text-muted-foreground uppercase tracking-wider px-2 py-1">主要功能</p>
                </div>
                <a href="../index.html" class="nav-item flex items-center space-x-2 px-2 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium">工作台</span>
                </a>
                <a href="requirement-management.html" class="nav-item flex items-center space-x-2 px-2 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium">需求管理</span>
                </a>

                <a href="ai-coding-assistant.html" class="nav-item flex items-center space-x-2 px-2 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium">AI编码助手管理</span>
                </a>

                <div class="mt-4 mb-3">
                    <p class="text-xs font-medium text-muted-foreground uppercase tracking-wider px-2 py-1">管理功能</p>
                </div>
                <a href="project-management.html" class="nav-item active flex items-center space-x-2 px-2 py-2 rounded-md bg-accent text-accent-foreground shadow-sm">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 00-2 2v6a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2V3a2 2 0 012-2v1a2 2 0 00-2 2H6a2 2 0 00-2 2z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium">项目管理</span>
                </a>


                <!-- 开发资源管理 - 二级菜单 -->
                <div class="nav-group">
                    <button class="nav-item nav-toggle flex items-center justify-between w-full px-2 py-2 rounded-md hover:bg-accent hover:text-accent-foreground" data-target="resource-submenu">
                        <div class="flex items-center space-x-2">
                            <div class="w-4 h-4 flex items-center justify-center">
                                <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"/>
                                    <path d="M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V9a1 1 0 00-1-1h-1v-1z"/>
                                </svg>
                            </div>
                            <span class="text-sm font-medium">开发资源管理</span>
                        </div>
                        <svg class="w-4 h-4 transition-transform duration-200 chevron-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                    <div id="resource-submenu" class="submenu hidden ml-6 mt-1 space-y-1">
                        <a href="database-management.html" class="nav-item flex items-center space-x-2 px-2 py-1.5 rounded-md hover:bg-accent hover:text-accent-foreground text-sm">
                            <div class="w-3 h-3 flex items-center justify-center">
                                <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"/>
                                </svg>
                            </div>
                            <span class="font-medium">数据库管理</span>
                        </a>
                        <a href="application-management.html" class="nav-item flex items-center space-x-2 px-2 py-1.5 rounded-md hover:bg-accent hover:text-accent-foreground text-sm">
                            <div class="w-3 h-3 flex items-center justify-center">
                                <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm2 0v8h12V6H4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <span class="font-medium">应用服务管理</span>
                        </a>
                        <a href="code-management.html" class="nav-item flex items-center space-x-2 px-2 py-1.5 rounded-md hover:bg-accent hover:text-accent-foreground text-sm">
                            <div class="w-3 h-3 flex items-center justify-center">
                                <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <span class="font-medium">代码管理</span>
                        </a>
                        <a href="server-management.html" class="nav-item flex items-center space-x-2 px-2 py-1.5 rounded-md hover:bg-accent hover:text-accent-foreground text-sm">
                            <div class="w-3 h-3 flex items-center justify-center">
                                <svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <span class="font-medium">服务器管理</span>
                        </a>
                    </div>
                </div>
                <a href="system-management.html" class="nav-item flex items-center space-x-2 px-2 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                    <div class="w-4 h-4 flex items-center justify-center">
                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <span class="text-sm font-medium">系统管理</span>
                </a>
            </nav>
        </div>

        <!-- 主内容区域 -->
        <main class="flex-1 flex flex-col lg:ml-0">
            <!-- 顶部导航栏 -->
            <header class="bg-card border-b border-border px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <!-- 移动端菜单按钮 -->
                        <button id="sidebar-toggle" class="lg:hidden p-2 rounded-md hover:bg-accent">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                            </svg>
                        </button>
                        
                        <div class="flex items-center space-x-2 text-sm text-muted-foreground">
                            <a href="project-management.html" class="hover:text-foreground">项目管理</a>
                            <span>/</span>
                            <span id="current-page">项目详情</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- 主题切换按钮 -->
                        <button id="theme-toggle" class="p-2 rounded-md hover:bg-accent transition-colors">
                            <svg class="w-5 h-5 dark:hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
                            </svg>
                            <svg class="w-5 h-5 hidden dark:block" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                            </svg>
                        </button>
                        
                        <!-- 用户信息 -->
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                                <span class="text-sm font-medium text-primary-foreground">A</span>
                            </div>
                            <span class="text-sm font-medium">管理员</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 页面内容 -->
            <main class="flex-1 p-6 overflow-auto" id="main-content">
                <!-- 项目详情页面内容 -->
                <div class="space-y-6">
                    <!-- 项目头部信息 -->
                    <div class="bg-card border border-border rounded-lg p-6">
                        <div class="flex items-center space-x-4 mb-4">
                            <div id="project-icon" class="w-16 h-16 bg-purple/10 rounded-lg flex items-center justify-center">
                                <span class="text-purple font-semibold text-2xl">🤖</span>
                            </div>
                            <div class="flex-1">
                                <h1 id="project-title" class="text-2xl font-bold mb-2">AI开发平台</h1>
                                <p id="project-description" class="text-muted-foreground">智能化开发工具平台，提供AI辅助编程功能</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span id="project-status" class="px-3 py-1 bg-green/10 text-green text-sm rounded-full">进行中</span>
                                <button class="px-4 py-2 border border-border rounded-md hover:bg-accent">编辑项目</button>
                            </div>
                        </div>
                    </div>

                    <!-- 标签页导航 -->
                    <div class="bg-card border border-border rounded-lg">
                        <nav class="border-b border-border px-6">
                            <div class="flex space-x-8">
                                <button class="py-3 px-1 border-b-2 border-primary text-primary font-medium text-sm" data-detail-tab="basic-info">
                                    基本信息
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="requirements">
                                    需求管理
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="tasks">
                                    开发任务
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="team">
                                    人员管理
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="code">
                                    项目代码管理
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="deployment">
                                    部署管理
                                </button>
                                <button class="py-3 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-detail-tab="resources">
                                    资源管理
                                </button>
                            </div>
                        </nav>

                        <!-- 标签页内容 -->
                        <div class="p-6">
                            <!-- 基本信息 -->
                            <div id="basic-info-content" class="detail-tab-content">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- 项目基本信息 -->
                                    <div class="space-y-6">
                                        <div class="bg-muted rounded-lg p-4">
                                            <h3 class="text-lg font-semibold mb-4">项目信息</h3>
                                            <div class="space-y-3">
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">项目名称:</span>
                                                    <span id="detail-project-name">AI开发平台</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">项目状态:</span>
                                                    <span id="detail-project-status" class="px-2 py-1 bg-green/10 text-green text-sm rounded">进行中</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">项目负责人:</span>
                                                    <span id="detail-project-manager">张项目经理</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">创建时间:</span>
                                                    <span id="detail-create-time">2024-01-15</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">最后更新:</span>
                                                    <span id="detail-update-time">2024-01-21</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-muted-foreground">项目进度:</span>
                                                    <span id="detail-progress">75%</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-muted rounded-lg p-4">
                                            <h3 class="text-lg font-semibold mb-4">技术栈</h3>
                                            <div class="flex flex-wrap gap-2" id="detail-tech-stack">
                                                <span class="px-3 py-1 bg-blue/10 text-blue text-sm rounded-full">React</span>
                                                <span class="px-3 py-1 bg-green/10 text-green text-sm rounded-full">Node.js</span>
                                                <span class="px-3 py-1 bg-yellow/10 text-yellow text-sm rounded-full">MongoDB</span>
                                                <span class="px-3 py-1 bg-purple/10 text-purple text-sm rounded-full">Docker</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 项目统计 -->
                                    <div class="space-y-6">
                                        <div class="bg-muted rounded-lg p-4">
                                            <h3 class="text-lg font-semibold mb-4">项目统计</h3>
                                            <div class="grid grid-cols-2 gap-4">
                                                <div class="text-center p-3 bg-card rounded-lg">
                                                    <div class="text-2xl font-bold text-blue">24</div>
                                                    <div class="text-xs text-muted-foreground">总需求数</div>
                                                </div>
                                                <div class="text-center p-3 bg-card rounded-lg">
                                                    <div class="text-2xl font-bold text-green">18</div>
                                                    <div class="text-xs text-muted-foreground">已完成</div>
                                                </div>
                                                <div class="text-center p-3 bg-card rounded-lg">
                                                    <div class="text-2xl font-bold text-yellow">4</div>
                                                    <div class="text-xs text-muted-foreground">进行中</div>
                                                </div>
                                                <div class="text-center p-3 bg-card rounded-lg">
                                                    <div class="text-2xl font-bold text-red">2</div>
                                                    <div class="text-xs text-muted-foreground">待处理</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-muted rounded-lg p-4">
                                            <h3 class="text-lg font-semibold mb-4">里程碑</h3>
                                            <div class="space-y-3">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-green rounded-full"></div>
                                                    <div class="flex-1">
                                                        <div class="text-sm font-medium">需求分析完成</div>
                                                        <div class="text-xs text-muted-foreground">2024-01-15</div>
                                                    </div>
                                                </div>
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-green rounded-full"></div>
                                                    <div class="flex-1">
                                                        <div class="text-sm font-medium">原型设计完成</div>
                                                        <div class="text-xs text-muted-foreground">2024-01-18</div>
                                                    </div>
                                                </div>
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-yellow rounded-full"></div>
                                                    <div class="flex-1">
                                                        <div class="text-sm font-medium">核心功能开发</div>
                                                        <div class="text-xs text-muted-foreground">进行中</div>
                                                    </div>
                                                </div>
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-gray rounded-full"></div>
                                                    <div class="flex-1">
                                                        <div class="text-sm font-medium">测试与部署</div>
                                                        <div class="text-xs text-muted-foreground">待开始</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 需求管理 -->
                            <div id="requirements-content" class="detail-tab-content hidden">
                                <div class="space-y-6">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-lg font-semibold">项目需求列表</h3>
                                        <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/80">
                                            新增需求
                                        </button>
                                    </div>

                                    <div class="space-y-4">
                                        <div class="border border-border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-3">
                                                <div class="flex items-center space-x-3">
                                                    <span class="px-2 py-1 bg-blue/10 text-blue text-xs rounded">功能需求</span>
                                                    <h4 class="font-medium">AI聊天功能</h4>
                                                </div>
                                                <span class="px-2 py-1 bg-green/10 text-green text-xs rounded">已完成</span>
                                            </div>
                                            <p class="text-sm text-muted-foreground mb-3">实现智能AI聊天功能，支持多轮对话和上下文理解</p>
                                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                                <div>
                                                    <span class="text-muted-foreground">优先级:</span>
                                                    <span class="ml-1 text-red">高</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">负责人:</span>
                                                    <span class="ml-1">李开发</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">预计工时:</span>
                                                    <span class="ml-1">40小时</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">完成时间:</span>
                                                    <span class="ml-1">2024-01-20</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border border-border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-3">
                                                <div class="flex items-center space-x-3">
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded">优化需求</span>
                                                    <h4 class="font-medium">界面优化</h4>
                                                </div>
                                                <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded">进行中</span>
                                            </div>
                                            <p class="text-sm text-muted-foreground mb-3">优化用户界面设计，提升用户体验</p>
                                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                                <div>
                                                    <span class="text-muted-foreground">优先级:</span>
                                                    <span class="ml-1 text-yellow">中</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">负责人:</span>
                                                    <span class="ml-1">王设计</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">预计工时:</span>
                                                    <span class="ml-1">24小时</span>
                                                </div>
                                                <div>
                                                    <span class="text-muted-foreground">预计完成:</span>
                                                    <span class="ml-1">2024-01-25</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 其他标签页内容 -->
                            <div id="tasks-content" class="detail-tab-content hidden">
                                <!-- 开发任务管理 -->
                                <div class="space-y-6">
                                    <!-- 标签页导航 -->
                                    <nav class="border-b border-border">
                                        <div class="flex space-x-8">
                                            <button class="py-2 px-1 border-b-2 border-primary text-primary font-medium text-sm" data-dev-tab="dev-tasks">
                                                研发任务
                                            </button>
                                            <button class="py-2 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-dev-tab="development-tasks">
                                                进行中任务
                                            </button>
                                            <button class="py-2 px-1 border-b-2 border-transparent text-muted-foreground hover:text-foreground text-sm" data-dev-tab="cloud-editor">
                                                云编辑器
                                            </button>
                                        </div>
                                    </nav>

                                    <!-- 研发任务界面 -->
                                    <div class="bg-card border border-border rounded-lg p-4" data-dev-tab-content="dev-tasks">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-semibold">研发任务管理</h3>
                                            <div class="flex items-center space-x-3">
                                                <!-- 项目筛选 -->
                                                <div class="flex items-center space-x-2">
                                                    <label class="text-sm text-muted-foreground">项目:</label>
                                                    <select id="project-filter" class="px-3 py-1.5 border border-border rounded text-sm bg-background" onchange="filterRequirementsByProject()">
                                                        <option value="">全部项目</option>
                                                        <option value="ai-platform">AI开发平台</option>
                                                        <option value="payment-system">支付系统</option>
                                                        <option value="mobile-app">移动应用</option>
                                                        <option value="data-analytics">数据分析平台</option>
                                                    </select>
                                                </div>
                                                <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800" onclick="createNewRequirement()">
                                                    新建需求
                                                </button>
                                            </div>
                                        </div>

                                        <!-- 需求统计 -->
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                            <div class="text-center p-3 bg-muted rounded-lg">
                                                <div class="text-2xl font-bold text-primary">8</div>
                                                <div class="text-xs text-muted-foreground">总需求数</div>
                                            </div>
                                            <div class="text-center p-3 bg-muted rounded-lg">
                                                <div class="text-2xl font-bold text-warning">3</div>
                                                <div class="text-xs text-muted-foreground">开发中</div>
                                            </div>
                                            <div class="text-center p-3 bg-muted rounded-lg">
                                                <div class="text-2xl font-bold text-muted-foreground">2</div>
                                                <div class="text-xs text-muted-foreground">待开发</div>
                                            </div>
                                            <div class="text-center p-3 bg-muted rounded-lg">
                                                <div class="text-2xl font-bold text-success">3</div>
                                                <div class="text-xs text-muted-foreground">已完成</div>
                                            </div>
                                        </div>

                                        <!-- 需求列表 -->
                                        <div class="space-y-4">
                                            <!-- 高优先级需求 -->
                                            <div class="border border-destructive rounded-lg p-4 bg-red-50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <h4 class="font-medium text-base">微信支付集成</h4>
                                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">💳 支付系统</span>
                                                        <span class="px-2 py-1 bg-destructive text-destructive-foreground text-xs rounded">🔴 高优先级</span>
                                                        <span class="px-2 py-1 bg-warning text-warning-foreground text-xs rounded">开发中</span>
                                                    </div>
                                                    <div class="text-xs text-muted-foreground">
                                                        创建时间: 2024-01-21 09:30
                                                    </div>
                                                </div>
                                                <p class="text-sm text-muted-foreground mb-3">集成微信支付SDK，实现支付、退款功能，支持多种支付场景</p>

                                                <!-- 需求详情 -->
                                                <div class="mb-3">
                                                    <span class="text-xs text-muted-foreground">预估工时:</span>
                                                    <span class="text-sm ml-2">3天</span>
                                                    <span class="text-xs text-muted-foreground ml-4">负责人:</span>
                                                    <span class="text-sm ml-2">张开发</span>
                                                </div>

                                                <!-- 操作按钮 -->
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-xs text-muted-foreground">进度:</span>
                                                        <div class="w-24 bg-muted rounded-full h-2">
                                                            <div class="bg-warning h-2 rounded-full" style="width: 60%"></div>
                                                        </div>
                                                        <span class="text-xs">60%</span>
                                                    </div>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            查看详情
                                                        </button>
                                                        <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800">
                                                            更新进度
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 中优先级需求 -->
                                            <div class="border border-border rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <h4 class="font-medium text-base">响应式布局优化</h4>
                                                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">📱 移动应用</span>
                                                        <span class="px-2 py-1 bg-warning text-warning-foreground text-xs rounded">🟡 中优先级</span>
                                                        <span class="px-2 py-1 bg-muted text-muted-foreground text-xs rounded">待开发</span>
                                                    </div>
                                                    <div class="text-xs text-muted-foreground">
                                                        创建时间: 2024-01-20 16:45
                                                    </div>
                                                </div>
                                                <p class="text-sm text-muted-foreground mb-3">优化页面布局，适配移动端屏幕，提升用户体验</p>

                                                <!-- 需求详情 -->
                                                <div class="mb-3">
                                                    <span class="text-xs text-muted-foreground">预估工时:</span>
                                                    <span class="text-sm ml-2">2天</span>
                                                    <span class="text-xs text-muted-foreground ml-4">负责人:</span>
                                                    <span class="text-sm ml-2">李前端</span>
                                                </div>

                                                <!-- 操作按钮 -->
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-xs text-muted-foreground">进度:</span>
                                                        <div class="w-24 bg-muted rounded-full h-2">
                                                            <div class="bg-muted h-2 rounded-full" style="width: 0%"></div>
                                                        </div>
                                                        <span class="text-xs">0%</span>
                                                    </div>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            查看详情
                                                        </button>
                                                        <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800">
                                                            开始开发
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 已完成需求 -->
                                            <div class="border border-border rounded-lg p-4 bg-green-50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <h4 class="font-medium text-base">数据库连接池优化</h4>
                                                        <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">📊 数据分析平台</span>
                                                        <span class="px-2 py-1 bg-muted text-muted-foreground text-xs rounded">🟢 低优先级</span>
                                                        <span class="px-2 py-1 bg-success text-success-foreground text-xs rounded">已完成</span>
                                                    </div>
                                                    <div class="text-xs text-muted-foreground">
                                                        完成时间: 2024-01-19 14:20
                                                    </div>
                                                </div>
                                                <p class="text-sm text-muted-foreground mb-3">优化数据库连接池配置，提升系统性能和稳定性</p>

                                                <!-- 完成详情 -->
                                                <div class="mb-3">
                                                    <span class="text-xs text-muted-foreground">实际工时:</span>
                                                    <span class="text-sm ml-2">1.5天</span>
                                                    <span class="text-xs text-muted-foreground ml-4">完成人:</span>
                                                    <span class="text-sm ml-2">王后端</span>
                                                </div>

                                                <!-- 操作按钮 -->
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-xs text-muted-foreground">进度:</span>
                                                        <div class="w-24 bg-muted rounded-full h-2">
                                                            <div class="bg-success h-2 rounded-full" style="width: 100%"></div>
                                                        </div>
                                                        <span class="text-xs">100%</span>
                                                    </div>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            查看详情
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 进行中任务界面 -->
                                    <div class="hidden" data-dev-tab-content="development-tasks">
                                        <div class="bg-card border border-border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-4">
                                                <h3 class="text-lg font-semibold">进行中任务管理</h3>
                                                <!-- 状态切换按钮组 -->
                                                <div class="flex bg-muted rounded-md p-1">
                                                    <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm font-medium" data-dev-task-filter="developing">
                                                        开发中
                                                    </button>
                                                    <button class="px-3 py-1.5 text-muted-foreground rounded text-sm" data-dev-task-filter="pending">
                                                        待开发
                                                    </button>
                                                    <button class="px-3 py-1.5 text-muted-foreground rounded text-sm" data-dev-task-filter="completed">
                                                        已完成
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- 待开发任务列表 -->
                                            <div class="space-y-4 hidden" data-dev-task-content="pending">
                                                <div class="flex items-center justify-between mb-4">
                                                    <span class="text-sm text-muted-foreground">共 3 个待开发任务</span>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            批量操作
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            排序设置
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- 任务队列 -->
                                                <div class="space-y-3" id="pending-tasks-queue">
                                                    <!-- 待开发任务项 -->
                                                    <div class="border border-border rounded-lg p-4 hover:bg-accent cursor-move" data-task-id="task-001" draggable="true">
                                                        <div class="flex items-center justify-between mb-3">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="text-lg cursor-move">⋮⋮</span>
                                                                <h4 class="font-medium text-base">前端模块开发任务</h4>
                                                                <span class="px-2 py-1 bg-warning text-warning-foreground text-xs rounded">队列中</span>
                                                            </div>
                                                            <div class="text-xs text-muted-foreground">
                                                                提交时间: 2024-01-21 14:30
                                                            </div>
                                                        </div>
                                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-3">
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">Agent配置:</span>
                                                                <div class="text-sm">Augment Code + GPT-4</div>
                                                            </div>
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">预估成本:</span>
                                                                <div class="text-sm">$2.50</div>
                                                            </div>
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">预估时间:</span>
                                                                <div class="text-sm">15分钟</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex space-x-2">
                                                            <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800" onclick="startTask('task-001')">
                                                                开始执行
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="editTask('task-001')">
                                                                编辑
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="viewTaskDetails('task-001')">
                                                                详情
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-destructive text-destructive rounded text-sm hover:bg-destructive hover:text-destructive-foreground" onclick="deleteTask('task-001')">
                                                                删除
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div class="border border-border rounded-lg p-4 hover:bg-accent cursor-move" data-task-id="task-002" draggable="true">
                                                        <div class="flex items-center justify-between mb-3">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="text-lg cursor-move">⋮⋮</span>
                                                                <h4 class="font-medium text-base">支付模块开发任务</h4>
                                                                <span class="px-2 py-1 bg-warning text-warning-foreground text-xs rounded">队列中</span>
                                                            </div>
                                                            <div class="text-xs text-muted-foreground">
                                                                提交时间: 2024-01-21 15:45
                                                            </div>
                                                        </div>
                                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-3">
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">Agent配置:</span>
                                                                <div class="text-sm">Claude + Cursor</div>
                                                            </div>
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">预估成本:</span>
                                                                <div class="text-sm">$4.20</div>
                                                            </div>
                                                            <div>
                                                                <span class="text-xs text-muted-foreground">预估时间:</span>
                                                                <div class="text-sm">25分钟</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex space-x-2">
                                                            <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800" onclick="startTask('task-002')">
                                                                开始执行
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="editTask('task-002')">
                                                                编辑
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="viewTaskDetails('task-002')">
                                                                详情
                                                            </button>
                                                            <button class="px-3 py-1.5 border border-destructive text-destructive rounded text-sm hover:bg-destructive hover:text-destructive-foreground" onclick="deleteTask('task-002')">
                                                                删除
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 开发中任务列表 -->
                                            <div class="space-y-4" data-dev-task-content="developing">
                                                <div class="flex items-center justify-between mb-4">
                                                    <span class="text-sm text-muted-foreground">共 2 个开发中任务</span>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            全部暂停
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            监控面板
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- 正在执行的任务 -->
                                                <div class="border border-primary rounded-lg p-4 bg-blue-50">
                                                    <div class="flex items-center justify-between mb-3">
                                                        <div class="flex items-center space-x-3">
                                                            <div class="w-3 h-3 bg-primary rounded-full animate-pulse"></div>
                                                            <h4 class="font-medium text-base cursor-pointer hover:text-primary" onclick="openTaskDetails('task-003')">数据库优化任务</h4>
                                                            <span class="px-2 py-1 bg-primary text-primary-foreground text-xs rounded">执行中</span>
                                                        </div>
                                                        <div class="text-xs text-muted-foreground">
                                                            开始时间: 2024-01-21 16:20
                                                        </div>
                                                    </div>
                                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-3">
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">Agent:</span>
                                                            <div class="text-sm">GPT-4 Turbo</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">已用时间:</span>
                                                            <div class="text-sm">8分钟</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">已用成本:</span>
                                                            <div class="text-sm">$1.20</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">进度:</span>
                                                            <div class="text-sm">65%</div>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="w-full bg-muted rounded-full h-2">
                                                            <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 65%"></div>
                                                        </div>
                                                    </div>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800" onclick="openTaskDetails('task-003')">
                                                            查看详情
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="viewTaskLogs('task-003')">
                                                            查看日志
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-warning text-warning rounded text-sm hover:bg-warning hover:text-warning-foreground" onclick="pauseTask('task-003')">
                                                            暂停
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-destructive text-destructive rounded text-sm hover:bg-destructive hover:text-destructive-foreground" onclick="stopTask('task-003')">
                                                            停止
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 已完成任务列表 -->
                                            <div class="space-y-4 hidden" data-dev-task-content="completed">
                                                <div class="flex items-center justify-between mb-4">
                                                    <span class="text-sm text-muted-foreground">共 5 个已完成任务</span>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            导出报告
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent">
                                                            统计分析
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- 已完成任务项 -->
                                                <div class="border border-border rounded-lg p-4 bg-green-50">
                                                    <div class="flex items-center justify-between mb-3">
                                                        <div class="flex items-center space-x-3">
                                                            <div class="w-3 h-3 bg-success rounded-full"></div>
                                                            <h4 class="font-medium text-base">用户认证模块</h4>
                                                            <span class="px-2 py-1 bg-success text-success-foreground text-xs rounded">已完成</span>
                                                        </div>
                                                        <div class="text-xs text-muted-foreground">
                                                            完成时间: 2024-01-21 15:30
                                                        </div>
                                                    </div>
                                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-3">
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">Agent:</span>
                                                            <div class="text-sm">Claude Sonnet</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">用时:</span>
                                                            <div class="text-sm">12分钟</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">成本:</span>
                                                            <div class="text-sm">$1.80</div>
                                                        </div>
                                                        <div>
                                                            <span class="text-xs text-muted-foreground">质量评分:</span>
                                                            <div class="text-sm">9.2/10</div>
                                                        </div>
                                                    </div>
                                                    <div class="flex space-x-2">
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="viewTaskResult('task-004')">
                                                            查看结果
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="downloadCode('task-004')">
                                                            下载代码
                                                        </button>
                                                        <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="viewTaskLogs('task-004')">
                                                            查看日志
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="team-content" class="detail-tab-content hidden">
                                <h3 class="text-lg font-semibold mb-4">团队人员管理</h3>
                                <p class="text-muted-foreground">人员管理功能正在开发中...</p>
                            </div>

                            <!-- 项目代码管理 -->
                            <div id="code-content" class="detail-tab-content hidden">
                                <div class="space-y-6">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-lg font-semibold">项目代码管理</h3>
                                        <div class="flex items-center space-x-3">
                                            <button class="px-4 py-2 bg-success text-success-foreground rounded-md hover:bg-success/80">
                                                新建仓库
                                            </button>
                                            <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/80">
                                                导入仓库
                                            </button>
                                        </div>
                                    </div>

                                    <!-- 代码统计 -->
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">项目仓库</p>
                                                    <p class="text-lg font-bold">3</p>
                                                </div>
                                                <div class="w-10 h-10 bg-blue/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">📁</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">代码分支</p>
                                                    <p class="text-lg font-bold">12</p>
                                                </div>
                                                <div class="w-10 h-10 bg-green/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">🌿</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">今日提交</p>
                                                    <p class="text-lg font-bold">8</p>
                                                </div>
                                                <div class="w-10 h-10 bg-purple/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">📝</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">代码行数</p>
                                                    <p class="text-lg font-bold">15.2K</p>
                                                </div>
                                                <div class="w-10 h-10 bg-yellow/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">💻</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 仓库列表 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <div class="flex items-center justify-between">
                                                <h4 class="text-lg font-semibold">项目仓库</h4>
                                                <div class="flex items-center space-x-3">
                                                    <input type="text" placeholder="搜索仓库..." class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                    <select class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                        <option>全部分支</option>
                                                        <option>主分支</option>
                                                        <option>开发分支</option>
                                                        <option>功能分支</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="divide-y divide-border">
                                            <!-- 主仓库 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-3 mb-2">
                                                            <h5 class="font-semibold text-primary hover:underline cursor-pointer">ai-platform-frontend</h5>
                                                            <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">主仓库</span>
                                                            <span class="px-2 py-1 bg-blue/10 text-blue text-xs rounded-full">公开</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground mb-3">AI开发平台前端代码 - React + TypeScript</p>
                                                        <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                            <div class="flex items-center space-x-1">
                                                                <div class="w-3 h-3 bg-blue rounded-full"></div>
                                                                <span>TypeScript</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>15</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>5</span>
                                                            </div>
                                                            <span>更新于 2小时前</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-2">
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">克隆</button>
                                                        <button class="px-3 py-1.5 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">查看</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">分支</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">提交</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 后端仓库 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-3 mb-2">
                                                            <h5 class="font-semibold text-primary hover:underline cursor-pointer">ai-platform-backend</h5>
                                                            <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded-full">私有</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground mb-3">AI开发平台后端API - Node.js + Express</p>
                                                        <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                            <div class="flex items-center space-x-1">
                                                                <div class="w-3 h-3 bg-green rounded-full"></div>
                                                                <span>JavaScript</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>8</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>3</span>
                                                            </div>
                                                            <span>更新于 4小时前</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-2">
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">克隆</button>
                                                        <button class="px-3 py-1.5 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">查看</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">分支</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">提交</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 文档仓库 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-3 mb-2">
                                                            <h5 class="font-semibold text-primary hover:underline cursor-pointer">ai-platform-docs</h5>
                                                            <span class="px-2 py-1 bg-blue/10 text-blue text-xs rounded-full">公开</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground mb-3">项目文档和API文档 - Markdown + VuePress</p>
                                                        <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                            <div class="flex items-center space-x-1">
                                                                <div class="w-3 h-3 bg-purple rounded-full"></div>
                                                                <span>Markdown</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>3</span>
                                                            </div>
                                                            <div class="flex items-center space-x-1">
                                                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                                    <path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                                                </svg>
                                                                <span>1</span>
                                                            </div>
                                                            <span>更新于 1天前</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-2">
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">克隆</button>
                                                        <button class="px-3 py-1.5 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">查看</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">分支</button>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">提交</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 最近提交 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <h4 class="text-lg font-semibold">最近提交</h4>
                                        </div>
                                        <div class="divide-y divide-border">
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-8 h-8 bg-blue/10 rounded-full flex items-center justify-center">
                                                        <span class="text-blue font-semibold text-sm">李</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-2 mb-1">
                                                            <span class="font-medium">李前端开发</span>
                                                            <span class="text-sm text-muted-foreground">提交到</span>
                                                            <span class="text-sm font-medium text-primary">ai-platform-frontend</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground">feat: 添加用户权限管理界面</p>
                                                    </div>
                                                    <div class="text-sm text-muted-foreground">2小时前</div>
                                                </div>
                                            </div>
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-8 h-8 bg-green/10 rounded-full flex items-center justify-center">
                                                        <span class="text-green font-semibold text-sm">王</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-2 mb-1">
                                                            <span class="font-medium">王后端开发</span>
                                                            <span class="text-sm text-muted-foreground">提交到</span>
                                                            <span class="text-sm font-medium text-primary">ai-platform-backend</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground">fix: 修复用户登录接口的权限验证问题</p>
                                                    </div>
                                                    <div class="text-sm text-muted-foreground">4小时前</div>
                                                </div>
                                            </div>
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-8 h-8 bg-purple/10 rounded-full flex items-center justify-center">
                                                        <span class="text-purple font-semibold text-sm">张</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <div class="flex items-center space-x-2 mb-1">
                                                            <span class="font-medium">张项目经理</span>
                                                            <span class="text-sm text-muted-foreground">提交到</span>
                                                            <span class="text-sm font-medium text-primary">ai-platform-docs</span>
                                                        </div>
                                                        <p class="text-sm text-muted-foreground">docs: 更新API文档和部署指南</p>
                                                    </div>
                                                    <div class="text-sm text-muted-foreground">1天前</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 云编辑器界面 -->
                                    <div class="hidden" data-dev-tab-content="cloud-editor">
                                        <div class="bg-card border border-border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-4">
                                                <h3 class="text-lg font-semibold">云端代码编辑器</h3>
                                                <div class="flex space-x-2">
                                                    <button class="px-3 py-1.5 border border-border rounded text-sm hover:bg-accent" onclick="saveAllFiles()">
                                                        保存所有文件
                                                    </button>
                                                    <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-sm hover:bg-gray-800" onclick="runCode()">
                                                        运行代码
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- 编辑器主体 -->
                                            <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 h-96">
                                                <!-- 文件树 -->
                                                <div class="lg:col-span-1 border border-border rounded-lg">
                                                    <div class="p-3 border-b border-border bg-muted">
                                                        <h4 class="text-sm font-medium">项目文件</h4>
                                                    </div>
                                                    <div class="p-2 text-sm" id="file-tree">
                                                        <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="toggleFolder(this)">
                                                            <span class="text-xs folder-icon">📁</span>
                                                            <span class="font-medium">src</span>
                                                        </div>
                                                        <div class="folder-content ml-4">
                                                            <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="openFileInEditor('Header.tsx')">
                                                                <span class="text-xs">📄</span>
                                                                <span>Header.tsx</span>
                                                            </div>
                                                            <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="openFileInEditor('Navigation.tsx')">
                                                                <span class="text-xs">📄</span>
                                                                <span>Navigation.tsx</span>
                                                            </div>
                                                            <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="openFileInEditor('Layout.tsx')">
                                                                <span class="text-xs">📄</span>
                                                                <span>Layout.tsx</span>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="toggleFolder(this)">
                                                            <span class="text-xs folder-icon">📁</span>
                                                            <span class="font-medium">styles</span>
                                                        </div>
                                                        <div class="folder-content ml-4">
                                                            <div class="flex items-center space-x-2 py-1 px-2 hover:bg-accent rounded cursor-pointer" onclick="openFileInEditor('layout.css')">
                                                                <span class="text-xs">📄</span>
                                                                <span>layout.css</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- 代码编辑器 -->
                                                <div class="lg:col-span-2 border border-border rounded-lg">
                                                    <!-- 编辑器标签页 -->
                                                    <div class="flex border-b border-border bg-muted" id="editor-tabs">
                                                        <div class="flex items-center space-x-2 px-4 py-2 border-r border-border bg-card cursor-pointer">
                                                            <span class="text-sm">Header.tsx</span>
                                                            <button class="text-xs hover:text-destructive" onclick="closeEditorTab('Header.tsx')">×</button>
                                                        </div>
                                                    </div>
                                                    <!-- Monaco Editor容器 -->
                                                    <div id="monaco-editor-container" class="h-80 bg-background">
                                                        <div class="flex items-center justify-center h-full bg-muted">
                                                            <div class="text-center">
                                                                <div class="text-lg font-medium mb-2">代码编辑器</div>
                                                                <div class="text-sm text-muted-foreground">点击左侧文件查看代码</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- 实时监控面板 -->
                                                <div class="lg:col-span-1 border border-border rounded-lg">
                                                    <div class="p-3 border-b border-border bg-muted">
                                                        <h4 class="text-sm font-medium">实时监控</h4>
                                                    </div>
                                                    <div class="p-2 space-y-3">
                                                        <!-- Agent状态 -->
                                                        <div class="text-xs">
                                                            <div class="flex items-center justify-between mb-1">
                                                                <span class="text-muted-foreground">Agent状态:</span>
                                                                <span class="text-success">运行中</span>
                                                            </div>
                                                            <div class="flex items-center justify-between mb-1">
                                                                <span class="text-muted-foreground">进度:</span>
                                                                <span data-progress>75%</span>
                                                            </div>
                                                            <div class="w-full bg-muted rounded-full h-1.5">
                                                                <div class="bg-primary h-1.5 rounded-full" style="width: 75%"></div>
                                                            </div>
                                                        </div>

                                                        <!-- 文件变更 -->
                                                        <div class="text-xs">
                                                            <div class="text-muted-foreground mb-2">文件变更:</div>
                                                            <div id="file-changes" class="space-y-1">
                                                                <div class="flex items-center justify-between p-2 bg-muted rounded">
                                                                    <span>Header.tsx</span>
                                                                    <span class="text-success">已生成</span>
                                                                </div>
                                                                <div class="flex items-center justify-between p-2 bg-muted rounded">
                                                                    <span>Navigation.tsx</span>
                                                                    <span class="text-warning">生成中...</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- 控制按钮 -->
                                                        <div class="space-y-2">
                                                            <button class="w-full px-3 py-1.5 border border-border rounded text-xs hover:bg-accent" onclick="pauseAgent()">
                                                                暂停Agent
                                                            </button>
                                                            <button class="w-full px-3 py-1.5 border border-destructive text-destructive rounded text-xs hover:bg-destructive hover:text-destructive-foreground" onclick="stopAgent()">
                                                                停止Agent
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 日志输出 -->
                                            <div class="mt-4 border border-border rounded-lg">
                                                <div class="flex items-center justify-between p-3 border-b border-border bg-muted">
                                                    <h4 class="text-sm font-medium">Agent执行日志</h4>
                                                    <div class="flex space-x-2">
                                                        <button class="px-2 py-1 text-xs border border-border rounded hover:bg-accent" onclick="toggleAutoScroll()">
                                                            自动滚动
                                                        </button>
                                                        <button class="px-2 py-1 text-xs border border-border rounded hover:bg-accent" onclick="clearLogs()">
                                                            清空日志
                                                        </button>
                                                    </div>
                                                </div>
                                                <div id="editor-logs" class="p-3 h-32 overflow-y-auto bg-background font-mono text-xs">
                                                    <div class="text-info">[14:30:15] 正在分析需求文档...</div>
                                                    <div class="text-info">[14:30:18] 开始生成Header组件...</div>
                                                    <div class="text-success">[14:30:22] Header.tsx 生成完成</div>
                                                    <div class="text-info">[14:30:25] 开始生成Navigation组件...</div>
                                                    <div class="text-warning">[14:30:28] 正在优化响应式布局...</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 部署管理 -->
                            <div id="deployment-content" class="detail-tab-content hidden">
                                <div class="space-y-6">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-lg font-semibold">CI/CD 部署管理</h3>
                                        <div class="flex items-center space-x-3">
                                            <button class="px-4 py-2 bg-success text-success-foreground rounded-md hover:bg-success/80">
                                                新建工作流
                                            </button>
                                            <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/80">
                                                查看日志
                                            </button>
                                        </div>
                                    </div>

                                    <!-- 部署状态概览 -->
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">活跃工作流</p>
                                                    <p class="text-lg font-bold">5</p>
                                                </div>
                                                <div class="w-10 h-10 bg-blue/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">⚙️</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">成功部署</p>
                                                    <p class="text-lg font-bold">142</p>
                                                </div>
                                                <div class="w-10 h-10 bg-green/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">✅</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">失败构建</p>
                                                    <p class="text-lg font-bold">8</p>
                                                </div>
                                                <div class="w-10 h-10 bg-red/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">❌</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">部署环境</p>
                                                    <p class="text-lg font-bold">3</p>
                                                </div>
                                                <div class="w-10 h-10 bg-purple/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">🌐</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 工作流状态 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <h4 class="text-lg font-semibold">工作流状态</h4>
                                        </div>
                                        <div class="divide-y divide-border">
                                            <!-- CI/CD 工作流 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-green/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-green" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">CI/CD Pipeline</h5>
                                                            <p class="text-sm text-muted-foreground">主分支自动构建和部署</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                        <span class="text-sm text-muted-foreground">2分钟前</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">查看</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 测试工作流 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-blue/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-blue" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">自动化测试</h5>
                                                            <p class="text-sm text-muted-foreground">单元测试和集成测试</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">通过</span>
                                                        <span class="text-sm text-muted-foreground">5分钟前</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">查看</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 代码质量检查 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-yellow/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-yellow" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">代码质量检查</h5>
                                                            <p class="text-sm text-muted-foreground">ESLint 和 SonarQube 分析</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded-full">警告</span>
                                                        <span class="text-sm text-muted-foreground">10分钟前</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">查看</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 部署环境 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <div class="flex items-center justify-between">
                                                <h4 class="text-lg font-semibold">部署环境</h4>
                                                <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-xs hover:bg-primary/80">
                                                    新增环境
                                                </button>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4">
                                            <!-- 开发环境 -->
                                            <div class="border border-border rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-2">
                                                        <div class="w-3 h-3 bg-blue rounded-full"></div>
                                                        <h5 class="font-semibold">开发环境</h5>
                                                    </div>
                                                    <span class="px-2 py-1 bg-blue/10 text-blue text-xs rounded-full">活跃</span>
                                                </div>
                                                <div class="space-y-2 text-sm">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">URL:</span>
                                                        <span class="text-primary">dev.ai-platform.com</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">分支:</span>
                                                        <span>develop</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">最后部署:</span>
                                                        <span>2小时前</span>
                                                    </div>
                                                </div>
                                                <div class="mt-3 flex space-x-2">
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                </div>
                                            </div>

                                            <!-- 测试环境 -->
                                            <div class="border border-border rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-2">
                                                        <div class="w-3 h-3 bg-yellow rounded-full"></div>
                                                        <h5 class="font-semibold">测试环境</h5>
                                                    </div>
                                                    <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded-full">部署中</span>
                                                </div>
                                                <div class="space-y-2 text-sm">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">URL:</span>
                                                        <span class="text-primary">test.ai-platform.com</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">分支:</span>
                                                        <span>release/v1.2</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">最后部署:</span>
                                                        <span>正在进行</span>
                                                    </div>
                                                </div>
                                                <div class="mt-3 flex space-x-2">
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                </div>
                                            </div>

                                            <!-- 生产环境 -->
                                            <div class="border border-border rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-2">
                                                        <div class="w-3 h-3 bg-green rounded-full"></div>
                                                        <h5 class="font-semibold">生产环境</h5>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">稳定</span>
                                                </div>
                                                <div class="space-y-2 text-sm">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">URL:</span>
                                                        <span class="text-primary">ai-platform.com</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">分支:</span>
                                                        <span>main</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">最后部署:</span>
                                                        <span>1天前</span>
                                                    </div>
                                                </div>
                                                <div class="mt-3 flex space-x-2">
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 构建历史 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <div class="flex items-center justify-between">
                                                <h4 class="text-lg font-semibold">构建历史</h4>
                                                <div class="flex items-center space-x-3">
                                                    <select class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                        <option>全部分支</option>
                                                        <option>main</option>
                                                        <option>develop</option>
                                                        <option>release/*</option>
                                                    </select>
                                                    <button class="px-3 py-1.5 bg-primary text-primary-foreground rounded text-xs hover:bg-primary/80">
                                                        重新运行
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="divide-y divide-border">
                                            <!-- 成功构建 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-green/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-green" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <div class="flex items-center space-x-2 mb-1">
                                                                <h5 class="font-semibold">#142</h5>
                                                                <span class="text-sm text-muted-foreground">feat: 添加用户权限管理</span>
                                                            </div>
                                                            <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                                <span>main</span>
                                                                <span>•</span>
                                                                <span>李前端开发</span>
                                                                <span>•</span>
                                                                <span>2小时前</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">成功</span>
                                                        <span class="text-sm text-muted-foreground">3m 24s</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">详情</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 失败构建 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-red/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-red" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <div class="flex items-center space-x-2 mb-1">
                                                                <h5 class="font-semibold">#141</h5>
                                                                <span class="text-sm text-muted-foreground">fix: 修复登录接口问题</span>
                                                            </div>
                                                            <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                                <span>develop</span>
                                                                <span>•</span>
                                                                <span>王后端开发</span>
                                                                <span>•</span>
                                                                <span>4小时前</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-red/10 text-red text-xs rounded-full">失败</span>
                                                        <span class="text-sm text-muted-foreground">1m 12s</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">详情</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 进行中构建 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-yellow/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-yellow animate-spin" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <div class="flex items-center space-x-2 mb-1">
                                                                <h5 class="font-semibold">#143</h5>
                                                                <span class="text-sm text-muted-foreground">refactor: 优化代码结构</span>
                                                            </div>
                                                            <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                                <span>feature/refactor</span>
                                                                <span>•</span>
                                                                <span>张项目经理</span>
                                                                <span>•</span>
                                                                <span>正在运行</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded-full">运行中</span>
                                                        <span class="text-sm text-muted-foreground">2m 45s</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">取消</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 跳过构建 -->
                                            <div class="p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-4">
                                                        <div class="w-8 h-8 bg-gray/10 rounded-full flex items-center justify-center">
                                                            <svg class="w-4 h-4 text-gray" fill="currentColor" viewBox="0 0 20 20">
                                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <div class="flex items-center space-x-2 mb-1">
                                                                <h5 class="font-semibold">#140</h5>
                                                                <span class="text-sm text-muted-foreground">docs: 更新文档</span>
                                                            </div>
                                                            <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                                                <span>docs/update</span>
                                                                <span>•</span>
                                                                <span>赵文档管理</span>
                                                                <span>•</span>
                                                                <span>6小时前</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-4">
                                                        <span class="px-2 py-1 bg-gray/10 text-gray text-xs rounded-full">跳过</span>
                                                        <span class="text-sm text-muted-foreground">--</span>
                                                        <button class="px-3 py-1.5 bg-muted hover:bg-accent border border-border rounded text-xs">详情</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 资源管理 -->
                            <div id="resources-content" class="detail-tab-content hidden">
                                <div class="space-y-6">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-lg font-semibold">项目资源管理</h3>
                                        <div class="flex items-center space-x-3">
                                            <button class="px-4 py-2 bg-success text-success-foreground rounded-md hover:bg-success/80">
                                                创建数据库
                                            </button>
                                            <button class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/80">
                                                创建应用
                                            </button>
                                        </div>
                                    </div>

                                    <!-- 资源概览 -->
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">数据库实例</p>
                                                    <p class="text-lg font-bold">3</p>
                                                </div>
                                                <div class="w-10 h-10 bg-blue/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">🗄️</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">应用服务</p>
                                                    <p class="text-lg font-bold">5</p>
                                                </div>
                                                <div class="w-10 h-10 bg-green/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">🚀</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">运行中服务</p>
                                                    <p class="text-lg font-bold">4</p>
                                                </div>
                                                <div class="w-10 h-10 bg-green/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">✅</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-muted rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm text-muted-foreground">存储使用</p>
                                                    <p class="text-lg font-bold">2.5GB</p>
                                                </div>
                                                <div class="w-10 h-10 bg-purple/10 rounded-lg flex items-center justify-center">
                                                    <span class="text-xl">💾</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 数据库管理 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <div class="flex items-center justify-between">
                                                <h4 class="text-lg font-semibold">数据库管理</h4>
                                                <div class="flex items-center space-x-3">
                                                    <input type="text" placeholder="搜索数据库..." class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                    <select class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                        <option>全部类型</option>
                                                        <option>MySQL</option>
                                                        <option>PostgreSQL</option>
                                                        <option>Redis</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="w-full">
                                                <thead class="bg-muted">
                                                    <tr>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">实例名称</th>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">类型</th>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">版本</th>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">连接地址</th>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">状态</th>
                                                        <th class="px-4 py-3 text-left text-sm font-medium text-muted-foreground">操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="divide-y divide-border">
                                                    <!-- MySQL 主库 -->
                                                    <tr class="hover:bg-muted/50">
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="text-xl">🐬</span>
                                                                <div>
                                                                    <p class="font-medium">ai-platform-mysql</p>
                                                                    <p class="text-sm text-muted-foreground">主数据库</p>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="px-4 py-3 text-sm">MySQL</td>
                                                        <td class="px-4 py-3 text-sm">8.0.35</td>
                                                        <td class="px-4 py-3 text-sm font-mono">mysql.ai-platform.local:3306</td>
                                                        <td class="px-4 py-3">
                                                            <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                        </td>
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-2">
                                                                <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs" onclick="viewDatabaseDetails('ai-platform-mysql')">查看详情</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">监控</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">备份</button>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                    <!-- Redis 缓存 -->
                                                    <tr class="hover:bg-muted/50">
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="text-xl">🔴</span>
                                                                <div>
                                                                    <p class="font-medium">ai-platform-redis</p>
                                                                    <p class="text-sm text-muted-foreground">缓存数据库</p>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="px-4 py-3 text-sm">Redis</td>
                                                        <td class="px-4 py-3 text-sm">7.0.12</td>
                                                        <td class="px-4 py-3 text-sm font-mono">redis.ai-platform.local:6379</td>
                                                        <td class="px-4 py-3">
                                                            <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                        </td>
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-2">
                                                                <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs" onclick="viewDatabaseDetails('ai-platform-redis')">查看详情</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">监控</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">清理</button>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                    <!-- PostgreSQL 分析库 -->
                                                    <tr class="hover:bg-muted/50">
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="text-xl">🐘</span>
                                                                <div>
                                                                    <p class="font-medium">ai-platform-analytics</p>
                                                                    <p class="text-sm text-muted-foreground">数据分析库</p>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="px-4 py-3 text-sm">PostgreSQL</td>
                                                        <td class="px-4 py-3 text-sm">15.4</td>
                                                        <td class="px-4 py-3 text-sm font-mono">postgres.ai-platform.local:5432</td>
                                                        <td class="px-4 py-3">
                                                            <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                        </td>
                                                        <td class="px-4 py-3">
                                                            <div class="flex items-center space-x-2">
                                                                <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs" onclick="viewDatabaseDetails('ai-platform-analytics')">查看详情</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">监控</button>
                                                                <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">备份</button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- 应用服务管理 -->
                                    <div class="bg-card border border-border rounded-lg">
                                        <div class="p-4 border-b border-border">
                                            <div class="flex items-center justify-between">
                                                <h4 class="text-lg font-semibold">应用服务管理</h4>
                                                <div class="flex items-center space-x-3">
                                                    <input type="text" placeholder="搜索应用..." class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                    <select class="px-3 py-1.5 bg-background border border-input rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring">
                                                        <option>全部状态</option>
                                                        <option>运行中</option>
                                                        <option>已停止</option>
                                                        <option>部署中</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
                                            <!-- 前端应用 -->
                                            <div class="border border-border rounded-lg p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-10 h-10 bg-blue/10 rounded-lg flex items-center justify-center">
                                                            <span class="text-xl">🌐</span>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">AI平台前端</h5>
                                                            <p class="text-sm text-muted-foreground">React应用</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                </div>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">端口:</span>
                                                        <span>3000</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">内存:</span>
                                                        <span>256MB</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">CPU:</span>
                                                        <span>15%</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">运行时间:</span>
                                                        <span>2天</span>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">重启</button>
                                                </div>
                                            </div>

                                            <!-- 后端API -->
                                            <div class="border border-border rounded-lg p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-10 h-10 bg-green/10 rounded-lg flex items-center justify-center">
                                                            <span class="text-xl">⚙️</span>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">AI平台API</h5>
                                                            <p class="text-sm text-muted-foreground">Node.js服务</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                </div>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">端口:</span>
                                                        <span>8080</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">内存:</span>
                                                        <span>512MB</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">CPU:</span>
                                                        <span>25%</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">运行时间:</span>
                                                        <span>2天</span>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">重启</button>
                                                </div>
                                            </div>

                                            <!-- AI服务 -->
                                            <div class="border border-border rounded-lg p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-10 h-10 bg-purple/10 rounded-lg flex items-center justify-center">
                                                            <span class="text-xl">🤖</span>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">AI推理服务</h5>
                                                            <p class="text-sm text-muted-foreground">Python服务</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                </div>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">端口:</span>
                                                        <span>5000</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">内存:</span>
                                                        <span>1GB</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">CPU:</span>
                                                        <span>45%</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">运行时间:</span>
                                                        <span>1天</span>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">重启</button>
                                                </div>
                                            </div>

                                            <!-- 监控服务 -->
                                            <div class="border border-border rounded-lg p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-10 h-10 bg-yellow/10 rounded-lg flex items-center justify-center">
                                                            <span class="text-xl">📊</span>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">监控服务</h5>
                                                            <p class="text-sm text-muted-foreground">Prometheus</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green/10 text-green text-xs rounded-full">运行中</span>
                                                </div>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">端口:</span>
                                                        <span>9090</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">内存:</span>
                                                        <span>128MB</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">CPU:</span>
                                                        <span>8%</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">运行时间:</span>
                                                        <span>5天</span>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="px-2 py-1 bg-primary hover:bg-primary/80 text-primary-foreground rounded text-xs">访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">重启</button>
                                                </div>
                                            </div>

                                            <!-- 文档服务 -->
                                            <div class="border border-border rounded-lg p-4 hover:bg-muted/50">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div class="flex items-center space-x-3">
                                                        <div class="w-10 h-10 bg-indigo/10 rounded-lg flex items-center justify-center">
                                                            <span class="text-xl">📚</span>
                                                        </div>
                                                        <div>
                                                            <h5 class="font-semibold">文档服务</h5>
                                                            <p class="text-sm text-muted-foreground">VuePress</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 bg-yellow/10 text-yellow text-xs rounded-full">部署中</span>
                                                </div>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">端口:</span>
                                                        <span>8081</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">内存:</span>
                                                        <span>--</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">CPU:</span>
                                                        <span>--</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-muted-foreground">状态:</span>
                                                        <span>启动中</span>
                                                    </div>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="px-2 py-1 bg-muted border border-border rounded text-xs" disabled>访问</button>
                                                    <button class="px-2 py-1 bg-muted hover:bg-accent border border-border rounded text-xs">日志</button>
                                                    <button class="px-2 py-1 bg-red/10 text-red hover:bg-red/20 rounded text-xs">停止</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </main>
    </div>

    <!-- 移动端遮罩 -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>

    <script>
        // 二级菜单交互功能
        document.addEventListener('DOMContentLoaded', function() {
            // 处理二级菜单展开/收起
            const navToggles = document.querySelectorAll('.nav-toggle');
            
            navToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.dataset.target;
                    const submenu = document.getElementById(targetId);
                    const chevron = this.querySelector('.chevron-icon');
                    
                    if (submenu) {
                        // 切换展开状态
                        submenu.classList.toggle('expanded');
                        submenu.classList.toggle('hidden');
                        chevron.classList.toggle('rotated');
                    }
                });
            });

            // 移动端侧边栏切换
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');

            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
            });

            overlay.addEventListener('click', function() {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            });

            // 从URL参数获取项目ID并加载项目数据
            const urlParams = new URLSearchParams(window.location.search);
            const projectId = urlParams.get('id') || 'ai-platform';
            loadProjectData(projectId);

            // 详情页面标签页切换
            const detailTabs = document.querySelectorAll('[data-detail-tab]');
            const detailContents = document.querySelectorAll('.detail-tab-content');

            detailTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.detailTab;

                    // 更新标签页样式
                    detailTabs.forEach(t => {
                        t.classList.remove('border-primary', 'text-primary');
                        t.classList.add('border-transparent', 'text-muted-foreground');
                    });
                    this.classList.remove('border-transparent', 'text-muted-foreground');
                    this.classList.add('border-primary', 'text-primary');

                    // 显示对应内容
                    detailContents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(targetTab + '-content').classList.remove('hidden');
                });
            });
        });

        // 加载项目数据
        function loadProjectData(projectId) {
            const projectData = getProjectData(projectId);
            if (projectData) {
                updateProjectInfo(projectData);
            }
        }

        // 获取项目数据
        function getProjectData(projectId) {
            const projects = {
                'ai-platform': {
                    id: 'ai-platform',
                    name: 'AI开发平台',
                    description: '智能化开发工具平台，提供AI辅助编程功能',
                    status: '进行中',
                    statusColor: 'green',
                    manager: '张项目经理',
                    createTime: '2024-01-15',
                    updateTime: '2024-01-21',
                    progress: '75%',
                    icon: '🤖',
                    iconBg: 'purple'
                },
                'payment-system': {
                    id: 'payment-system',
                    name: '支付系统',
                    description: '多渠道支付集成系统，支持微信、支付宝等',
                    status: '开发中',
                    statusColor: 'yellow',
                    manager: '李技术总监',
                    createTime: '2024-01-10',
                    updateTime: '2024-01-21',
                    progress: '45%',
                    icon: '💳',
                    iconBg: 'green'
                },
                'mobile-app': {
                    id: 'mobile-app',
                    name: '移动应用',
                    description: '跨平台移动应用开发，支持iOS和Android',
                    status: '已完成',
                    statusColor: 'green',
                    manager: '王移动开发',
                    createTime: '2023-12-01',
                    updateTime: '2024-01-15',
                    progress: '100%',
                    icon: '📱',
                    iconBg: 'blue'
                }
            };
            
            return projects[projectId] || null;
        }

        // 更新项目信息
        function updateProjectInfo(projectData) {
            // 颜色映射
            const colorClasses = {
                blue: { bg: 'bg-blue/10', text: 'text-blue' },
                green: { bg: 'bg-green/10', text: 'text-green' },
                yellow: { bg: 'bg-yellow/10', text: 'text-yellow' },
                purple: { bg: 'bg-purple/10', text: 'text-purple' },
                red: { bg: 'bg-red/10', text: 'text-red' }
            };
            
            // 更新基本信息
            const iconColor = colorClasses[projectData.iconBg] || colorClasses.purple;
            document.getElementById('project-icon').innerHTML = `<span class="${iconColor.text} font-semibold text-2xl">${projectData.icon}</span>`;
            document.getElementById('project-icon').className = `w-16 h-16 ${iconColor.bg} rounded-lg flex items-center justify-center`;
            document.getElementById('project-title').textContent = projectData.name;
            document.getElementById('project-description').textContent = projectData.description;
            
            // 更新状态
            const statusColor = colorClasses[projectData.statusColor] || colorClasses.green;
            document.getElementById('project-status').textContent = projectData.status;
            document.getElementById('project-status').className = `px-3 py-1 ${statusColor.bg} ${statusColor.text} text-sm rounded-full`;
            
            // 更新页面标题
            document.title = `${projectData.name} - 项目详情 - AI开发平台`;
        }

        // 数据库详情查看功能
        function viewDatabaseDetails(databaseId) {
            const databaseInfo = {
                'ai-platform-mysql': {
                    name: 'AI平台主数据库',
                    type: 'MySQL',
                    version: '8.0.35',
                    host: 'mysql.ai-platform.local:3306',
                    databases: ['ai_platform', 'user_management', 'project_data'],
                    tables: {
                        'ai_platform': ['users', 'projects', 'tasks', 'requirements'],
                        'user_management': ['user_profiles', 'permissions', 'roles'],
                        'project_data': ['project_files', 'code_repos', 'deployments']
                    }
                },
                'ai-platform-redis': {
                    name: 'AI平台缓存数据库',
                    type: 'Redis',
                    version: '7.0.12',
                    host: 'redis.ai-platform.local:6379',
                    databases: ['0', '1', '2'],
                    keys: ['session:*', 'cache:*', 'queue:*']
                },
                'ai-platform-analytics': {
                    name: 'AI平台分析数据库',
                    type: 'PostgreSQL',
                    version: '15.4',
                    host: 'postgres.ai-platform.local:5432',
                    databases: ['analytics', 'logs', 'metrics'],
                    tables: {
                        'analytics': ['user_behavior', 'feature_usage', 'performance_metrics'],
                        'logs': ['application_logs', 'error_logs', 'audit_logs'],
                        'metrics': ['system_metrics', 'business_metrics', 'custom_metrics']
                    }
                }
            };

            const dbInfo = databaseInfo[databaseId];
            if (dbInfo) {
                let detailsText = `数据库详情：${dbInfo.name}\n\n`;
                detailsText += `类型：${dbInfo.type}\n`;
                detailsText += `版本：${dbInfo.version}\n`;
                detailsText += `连接地址：${dbInfo.host}\n\n`;

                if (dbInfo.type === 'Redis') {
                    detailsText += `数据库：${dbInfo.databases.join(', ')}\n`;
                    detailsText += `主要键模式：${dbInfo.keys.join(', ')}\n\n`;
                } else {
                    detailsText += `数据库列表：${dbInfo.databases.join(', ')}\n\n`;
                    if (dbInfo.tables) {
                        detailsText += `数据表信息：\n`;
                        Object.keys(dbInfo.tables).forEach(db => {
                            detailsText += `  ${db}: ${dbInfo.tables[db].join(', ')}\n`;
                        });
                    }
                }

                detailsText += `\n点击"查看详情"可以进入数据库管理界面，对库表数据进行查询操作。`;
                alert(detailsText);
            }
        }

        // 开发任务标签页交互功能
        document.addEventListener('DOMContentLoaded', function() {
            // 开发任务子标签页切换
            const devTabs = document.querySelectorAll('[data-dev-tab]');
            const devTabContents = document.querySelectorAll('[data-dev-tab-content]');

            devTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-dev-tab');

                    // 更新标签页样式
                    devTabs.forEach(t => {
                        t.classList.remove('border-primary', 'text-primary', 'font-medium');
                        t.classList.add('border-transparent', 'text-muted-foreground');
                    });
                    this.classList.remove('border-transparent', 'text-muted-foreground');
                    this.classList.add('border-primary', 'text-primary', 'font-medium');

                    // 切换内容
                    devTabContents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    const targetContent = document.querySelector(`[data-dev-tab-content="${targetTab}"]`);
                    if (targetContent) {
                        targetContent.classList.remove('hidden');
                    }
                });
            });

            // 开发任务状态筛选
            const devTaskFilters = document.querySelectorAll('[data-dev-task-filter]');
            const devTaskContents = document.querySelectorAll('[data-dev-task-content]');

            devTaskFilters.forEach(filter => {
                filter.addEventListener('click', function() {
                    const targetFilter = this.getAttribute('data-dev-task-filter');

                    // 更新筛选按钮样式
                    devTaskFilters.forEach(f => {
                        f.classList.remove('bg-primary', 'text-primary-foreground');
                        f.classList.add('text-muted-foreground');
                    });
                    this.classList.remove('text-muted-foreground');
                    this.classList.add('bg-primary', 'text-primary-foreground');

                    // 切换任务内容
                    devTaskContents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    const targetContent = document.querySelector(`[data-dev-task-content="${targetFilter}"]`);
                    if (targetContent) {
                        targetContent.classList.remove('hidden');
                    }
                });
            });
        });

        // 开发任务相关功能函数
        function createNewRequirement() {
            alert('新建需求功能：打开需求创建表单');
        }

        function filterRequirementsByProject() {
            const projectFilter = document.getElementById('project-filter');
            alert(`筛选项目：${projectFilter.value || '全部项目'}`);
        }

        function startTask(taskId) {
            alert(`开始执行任务：${taskId}`);
        }

        function editTask(taskId) {
            alert(`编辑任务：${taskId}`);
        }

        function viewTaskDetails(taskId) {
            alert(`查看任务详情：${taskId}`);
        }

        function deleteTask(taskId) {
            if (confirm(`确定要删除任务 ${taskId} 吗？`)) {
                alert(`任务 ${taskId} 已删除`);
            }
        }

        function viewTaskLogs(taskId) {
            alert(`查看任务日志：${taskId}`);
        }

        function pauseTask(taskId) {
            alert(`暂停任务：${taskId}`);
        }

        function stopTask(taskId) {
            if (confirm(`确定要停止任务 ${taskId} 吗？`)) {
                alert(`任务 ${taskId} 已停止`);
            }
        }

        function viewTaskResult(taskId) {
            alert(`查看任务结果：${taskId}`);
        }

        function downloadCode(taskId) {
            alert(`下载代码：${taskId}`);
        }

        // 云编辑器相关功能函数
        function saveAllFiles() {
            alert('所有文件已保存');
            addEditorLog('[' + new Date().toLocaleTimeString() + '] 所有文件已保存', 'success');
        }

        function runCode() {
            alert('正在运行代码...');
            addEditorLog('[' + new Date().toLocaleTimeString() + '] 开始运行代码', 'info');
        }

        function toggleFolder(element) {
            const folderContent = element.nextElementSibling;
            const folderIcon = element.querySelector('.folder-icon');

            if (folderContent) {
                if (folderContent.style.display === 'none') {
                    folderContent.style.display = 'block';
                    folderIcon.textContent = '📂';
                } else {
                    folderContent.style.display = 'none';
                    folderIcon.textContent = '📁';
                }
            }
        }

        function openFileInEditor(fileName) {
            console.log(`打开文件: ${fileName}`);

            // 模拟文件内容
            const fileContents = {
                'Header.tsx': `import React from 'react';

interface HeaderProps {
  title: string;
  subtitle?: string;
}

const Header: React.FC<HeaderProps> = ({ title, subtitle }) => {
  return (
    <header className="bg-white shadow-sm border-b">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center py-6">
          <div>
            <h1 className="text-2xl font-bold text-gray-900">{title}</h1>
            {subtitle && (
              <p className="text-sm text-gray-600">{subtitle}</p>
            )}
          </div>
        </div>
      </div>
    </header>
  );
};

export default Header;`,
                'Navigation.tsx': `import React from 'react';

const Navigation: React.FC = () => {
  return (
    <nav className="bg-gray-800">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <span className="text-white font-bold">AI开发平台</span>
            </div>
          </div>
        </div>
      </div>
    </nav>
  );
};

export default Navigation;`,
                'Layout.tsx': `import React from 'react';
import Header from './Header';
import Navigation from './Navigation';

interface LayoutProps {
  children: React.ReactNode;
}

const Layout: React.FC<LayoutProps> = ({ children }) => {
  return (
    <div className="min-h-screen bg-gray-50">
      <Navigation />
      <Header title="AI开发平台" subtitle="智能化项目管理系统" />
      <main className="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        {children}
      </main>
    </div>
  );
};

export default Layout;`,
                'layout.css': `/* 布局样式 */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 16px;
}

.header {
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid #e5e7eb;
}

.navigation {
  background: #1f2937;
  color: white;
}

.main-content {
  min-height: calc(100vh - 120px);
  background: #f9fafb;
  padding: 24px 0;
}

@media (max-width: 768px) {
  .container {
    padding: 0 12px;
  }

  .main-content {
    padding: 16px 0;
  }
}`
            };

            const content = fileContents[fileName] || `// ${fileName} 文件内容`;

            // 更新编辑器内容显示
            const editorContainer = document.getElementById('monaco-editor-container');
            if (editorContainer) {
                editorContainer.innerHTML = `
                    <div class="h-full p-4 bg-background font-mono text-sm overflow-auto">
                        <pre class="whitespace-pre-wrap">${content}</pre>
                    </div>
                `;
            }

            // 更新标签页
            updateEditorTab(fileName);

            addEditorLog(`[${new Date().toLocaleTimeString()}] 已打开文件: ${fileName}`, 'info');
        }

        function updateEditorTab(fileName) {
            const tabsContainer = document.getElementById('editor-tabs');
            if (tabsContainer) {
                tabsContainer.innerHTML = `
                    <div class="flex items-center space-x-2 px-4 py-2 border-r border-border bg-card cursor-pointer">
                        <span class="text-sm">${fileName}</span>
                        <button class="text-xs hover:text-destructive" onclick="closeEditorTab('${fileName}')">×</button>
                    </div>
                `;
            }
        }

        function closeEditorTab(fileName) {
            console.log(`关闭标签页: ${fileName}`);
            addEditorLog(`[${new Date().toLocaleTimeString()}] 关闭文件: ${fileName}`, 'info');
        }

        function pauseAgent() {
            if (confirm('确定要暂停Agent吗？')) {
                alert('Agent已暂停');
                addEditorLog(`[${new Date().toLocaleTimeString()}] Agent已暂停`, 'warning');
            }
        }

        function stopAgent() {
            if (confirm('确定要停止Agent吗？这将终止当前的代码生成过程。')) {
                alert('Agent已停止');
                addEditorLog(`[${new Date().toLocaleTimeString()}] Agent已停止`, 'destructive');
            }
        }

        function toggleAutoScroll() {
            alert('自动滚动已切换');
        }

        function clearLogs() {
            const editorLogs = document.getElementById('editor-logs');
            if (editorLogs) {
                editorLogs.innerHTML = '';
            }
        }

        function addEditorLog(message, type = 'info') {
            const editorLogs = document.getElementById('editor-logs');
            if (editorLogs) {
                const logEntry = document.createElement('div');
                logEntry.className = `text-${type}`;
                logEntry.textContent = message;

                editorLogs.appendChild(logEntry);
                editorLogs.scrollTop = editorLogs.scrollHeight;
            }
        }

        // 任务详情模态框相关功能函数
        let modalMonacoEditor = null;

        function openTaskDetails(taskId) {
            console.log(`打开任务详情: ${taskId}`);

            // 显示模态框
            const modal = document.getElementById('task-details-modal');
            if (modal) {
                modal.classList.remove('hidden');

                // 更新任务标题
                const title = document.getElementById('task-details-title');
                if (title) {
                    const taskNames = {
                        'task-003': '数据库优化任务 - 开发详情',
                        'task-004': '用户认证模块 - 开发详情',
                        'task-005': '前端界面优化 - 开发详情'
                    };
                    title.textContent = taskNames[taskId] || `${taskId} - 开发详情`;
                }

                // 初始化Monaco Editor
                initModalMonacoEditor();

                // 模拟实时日志更新
                startModalLogSimulation(taskId);
            }
        }

        function closeTaskDetails() {
            const modal = document.getElementById('task-details-modal');
            if (modal) {
                modal.classList.add('hidden');

                // 停止日志模拟
                if (window.modalLogInterval) {
                    clearInterval(window.modalLogInterval);
                    window.modalLogInterval = null;
                }

                // 停止AI Agent日志模拟
                if (window.aiAgentLogInterval) {
                    clearInterval(window.aiAgentLogInterval);
                    window.aiAgentLogInterval = null;
                }

                // 清理Monaco Editor
                if (modalMonacoEditor) {
                    modalMonacoEditor.dispose();
                    modalMonacoEditor = null;
                }
            }
        }

        function initModalMonacoEditor() {
            // 如果已经初始化过，先清理
            if (modalMonacoEditor) {
                modalMonacoEditor.dispose();
                modalMonacoEditor = null;
            }

            // 配置Monaco Editor - 使用官方CDN
            require.config({
                paths: {
                    'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs'
                }
            });

            // 设置Monaco Editor环境
            window.MonacoEnvironment = {
                getWorkerUrl: function (moduleId, label) {
                    if (label === 'json') {
                        return 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/language/json/json.worker.js';
                    }
                    if (label === 'css' || label === 'scss' || label === 'less') {
                        return 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/language/css/css.worker.js';
                    }
                    if (label === 'html' || label === 'handlebars' || label === 'razor') {
                        return 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/language/html/html.worker.js';
                    }
                    if (label === 'typescript' || label === 'javascript') {
                        return 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/language/typescript/ts.worker.js';
                    }
                    return 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/editor/editor.worker.js';
                }
            };

            require(['vs/editor/editor.main'], function () {
                const container = document.getElementById('vscode-monaco-editor');
                if (container) {
                    // 创建Monaco Editor实例 - 完整VSCode配置
                    modalMonacoEditor = monaco.editor.create(container, {
                        value: getDefaultFileContent('user_logs_idx.sql'),
                        language: 'sql',
                        theme: 'vs-dark',

                        // 编辑器基础配置
                        automaticLayout: true,
                        fontSize: 14,
                        fontFamily: 'Consolas, "Courier New", monospace',
                        fontWeight: 'normal',
                        lineHeight: 20,
                        letterSpacing: 0,

                        // 行号和装饰
                        lineNumbers: 'on',
                        lineNumbersMinChars: 4,
                        lineDecorationsWidth: 10,
                        glyphMargin: true,

                        // 滚动和选择
                        scrollBeyondLastLine: false,
                        smoothScrolling: true,
                        mouseWheelZoom: true,
                        roundedSelection: false,

                        // 代码折叠和换行
                        folding: true,
                        foldingStrategy: 'auto',
                        wordWrap: 'on',
                        wordWrapColumn: 120,

                        // 小地图
                        minimap: {
                            enabled: true,
                            side: 'right',
                            showSlider: 'mouseover',
                            renderCharacters: true,
                            maxColumn: 120
                        },

                        // 光标和选择
                        cursorBlinking: 'blink',
                        cursorSmoothCaretAnimation: true,
                        cursorStyle: 'line',
                        cursorWidth: 2,

                        // 渲染选项
                        renderWhitespace: 'selection',
                        renderControlCharacters: false,
                        renderIndentGuides: true,
                        renderLineHighlight: 'line',

                        // 字体连字
                        fontLigatures: true,

                        // 代码提示和补全
                        suggest: {
                            showKeywords: true,
                            showSnippets: true,
                            showFunctions: true,
                            showConstructors: true,
                            showFields: true,
                            showVariables: true,
                            showClasses: true,
                            showStructs: true,
                            showInterfaces: true,
                            showModules: true,
                            showProperties: true,
                            showEvents: true,
                            showOperators: true,
                            showUnits: true,
                            showValues: true,
                            showConstants: true,
                            showEnums: true,
                            showEnumMembers: true,
                            showColors: true,
                            showFiles: true,
                            showReferences: true,
                            showFolders: true,
                            showTypeParameters: true
                        },

                        // 快速建议
                        quickSuggestions: {
                            other: true,
                            comments: false,
                            strings: false
                        },
                        quickSuggestionsDelay: 100,

                        // 参数提示
                        parameterHints: {
                            enabled: true,
                            cycle: true
                        },

                        // 悬停提示
                        hover: {
                            enabled: true,
                            delay: 300,
                            sticky: true
                        },

                        // 上下文菜单
                        contextmenu: true,

                        // 查找和替换
                        find: {
                            seedSearchStringFromSelection: true,
                            autoFindInSelection: 'never'
                        },

                        // 格式化
                        formatOnPaste: true,
                        formatOnType: true,

                        // 其他选项
                        readOnly: false,
                        selectOnLineNumbers: true,
                        selectionHighlight: true,
                        occurrencesHighlight: true,
                        codeLens: true,
                        colorDecorators: true,
                        links: true,
                        matchBrackets: 'always',
                        autoClosingBrackets: 'always',
                        autoClosingQuotes: 'always',
                        autoSurround: 'languageDefined',
                        dragAndDrop: true,
                        copyWithSyntaxHighlighting: true
                    });

                    // 添加编辑器事件监听
                    modalMonacoEditor.onDidChangeModelContent(() => {
                        addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 代码已修改`, 'info');
                        updateFileStatus(window.currentVSCodeFile, 'modified');
                    });

                    // 添加光标位置变化监听
                    modalMonacoEditor.onDidChangeCursorPosition((e) => {
                        updateStatusBar(e.position.lineNumber, e.position.column);
                    });

                    // 添加快捷键
                    modalMonacoEditor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, () => {
                        saveVSCodeFile();
                    });

                    modalMonacoEditor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, () => {
                        modalMonacoEditor.getAction('actions.find').run();
                    });

                    modalMonacoEditor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH, () => {
                        modalMonacoEditor.getAction('editor.action.startFindReplaceAction').run();
                    });

                    modalMonacoEditor.addCommand(monaco.KeyMod.Alt | monaco.KeyMod.Shift | monaco.KeyCode.KeyF, () => {
                        modalMonacoEditor.getAction('editor.action.formatDocument').run();
                    });

                    console.log('Monaco Editor 初始化完成 - 完整VSCode配置');
                    addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] Monaco Editor 初始化完成`, 'success');

                    // 初始化VSCode界面
                    initVSCodeInterface();
                }
            });
        }

        // VSCode界面管理函数
        function initVSCodeInterface() {
            // 设置默认激活的面板
            switchVSCodePanel('explorer');
            switchBottomPanel('terminal');

            // 设置当前文件
            window.currentVSCodeFile = 'user_logs_idx.sql';
        }

        function startModalLogSimulation(taskId) {
            // 清除之前的定时器
            if (window.modalLogInterval) {
                clearInterval(window.modalLogInterval);
            }

            // 模拟实时日志更新
            const logMessages = [
                { message: '正在执行代码生成...', type: 'info' },
                { message: '分析项目依赖关系...', type: 'info' },
                { message: '生成数据模型文件...', type: 'success' },
                { message: '优化数据库查询语句...', type: 'warning' },
                { message: '运行单元测试...', type: 'info' },
                { message: '测试通过，代码质量良好', type: 'success' },
                { message: '正在生成API文档...', type: 'info' },
                { message: '部署到测试环境...', type: 'warning' }
            ];

            let messageIndex = 0;
            window.modalLogInterval = setInterval(() => {
                if (messageIndex < logMessages.length) {
                    const log = logMessages[messageIndex];
                    addModalLog(`[${new Date().toLocaleTimeString()}] ${log.message}`, log.type);
                    messageIndex++;
                } else {
                    // 重新开始循环
                    messageIndex = 0;
                }
            }, 3000); // 每3秒添加一条新日志
        }

        function addModalLog(message, type = 'info') {
            const modalLogs = document.getElementById('task-modal-logs');
            if (modalLogs) {
                const logEntry = document.createElement('div');
                logEntry.className = `text-${type}`;
                logEntry.textContent = message;

                modalLogs.appendChild(logEntry);
                modalLogs.scrollTop = modalLogs.scrollHeight;
            }
        }

        function toggleAutoScrollModal() {
            alert('模态框自动滚动已切换');
        }

        function clearModalLogs() {
            const modalLogs = document.getElementById('task-modal-logs');
            if (modalLogs) {
                modalLogs.innerHTML = `
                    <div class="text-info">[16:20:15] 任务开始执行：数据库优化任务</div>
                    <div class="text-info">[16:20:18] 正在分析数据库结构...</div>
                    <div class="text-success">[16:20:22] 数据库连接成功</div>
                `;
            }
        }

        function refreshGeneratedFiles() {
            alert('正在刷新生成的文件列表...');
            addModalLog(`[${new Date().toLocaleTimeString()}] 刷新文件列表`, 'info');
        }

        function downloadAllFiles() {
            alert('正在下载所有生成的文件...');
            addModalLog(`[${new Date().toLocaleTimeString()}] 开始下载文件`, 'success');
        }

        function getDefaultFileContent(fileName) {
            const fileContents = {
                'user_logs_idx.sql': `-- 用户日志表索引优化脚本
-- 生成时间: 2024-01-21 16:20:35
-- Agent: GPT-4 Turbo
-- 文件类型: SQL索引优化

-- 创建复合索引以优化查询性能
CREATE INDEX idx_user_logs_created_at_user_id
ON user_logs (created_at DESC, user_id);

-- 创建覆盖索引以优化统计查询
CREATE INDEX idx_user_logs_action_created_at
ON user_logs (action, created_at DESC)
INCLUDE (user_id, ip_address);

-- 创建部分索引以优化活跃用户查询
CREATE INDEX idx_user_logs_active_users
ON user_logs (user_id, created_at DESC)
WHERE action IN ('login', 'page_view', 'api_call');

-- 删除冗余的旧索引
DROP INDEX IF EXISTS old_user_logs_created_at;
DROP INDEX IF EXISTS old_user_logs_user_id;

-- 更新表统计信息
ANALYZE user_logs;

-- 性能测试查询
EXPLAIN (ANALYZE, BUFFERS)
SELECT user_id, action, created_at
FROM user_logs
WHERE created_at > CURRENT_DATE - INTERVAL '7 days'
ORDER BY created_at DESC;`,
                'optimized_queries.sql': `-- 优化后的查询语句
-- 生成时间: 2024-01-21 16:20:48
-- Agent: GPT-4 Turbo
-- 文件类型: SQL查询优化

-- 原始慢查询（优化前）
-- SELECT * FROM user_logs WHERE created_at > '2024-01-01';
-- 执行时间: 2.5秒，扫描行数: 1,000,000

-- 优化后的查询（性能提升60%）
SELECT user_id, action, created_at, ip_address
FROM user_logs
WHERE created_at > '2024-01-01'
  AND action IS NOT NULL
ORDER BY created_at DESC
LIMIT 1000;
-- 执行时间: 0.8秒，扫描行数: 50,000

-- 统计查询优化
WITH daily_stats AS (
    SELECT
        DATE(created_at) as log_date,
        action,
        COUNT(*) as action_count,
        COUNT(DISTINCT user_id) as unique_users
    FROM user_logs
    WHERE created_at >= CURRENT_DATE - INTERVAL '30 days'
    GROUP BY DATE(created_at), action
)
SELECT
    log_date,
    action,
    action_count,
    unique_users,
    ROUND(action_count::numeric / SUM(action_count) OVER (PARTITION BY log_date) * 100, 2) as percentage
FROM daily_stats
ORDER BY log_date DESC, action_count DESC;

-- 活跃用户查询优化
SELECT DISTINCT user_id
FROM user_logs
WHERE created_at >= CURRENT_DATE - INTERVAL '7 days'
  AND action IN ('login', 'page_view', 'api_call')
  AND user_id IS NOT NULL
ORDER BY user_id;`,
                'migration_001.sql': `-- 数据库迁移脚本
-- 版本: 001
-- 生成时间: 2024-01-21 16:20:52
-- Agent: GPT-4 Turbo
-- 文件类型: 数据库迁移

-- 迁移说明
-- 本迁移脚本用于优化user_logs表结构
-- 添加新字段以支持更详细的用户行为分析

-- 开始事务
BEGIN;

-- 创建迁移日志表
CREATE TABLE IF NOT EXISTS migration_log (
    id SERIAL PRIMARY KEY,
    version VARCHAR(50) NOT NULL,
    description TEXT,
    executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    execution_time_ms INTEGER
);

-- 记录迁移开始
INSERT INTO migration_log (version, description)
VALUES ('001', '用户日志表结构优化');

-- 备份现有数据
CREATE TABLE user_logs_backup_20240121 AS
SELECT * FROM user_logs;

-- 添加新字段
ALTER TABLE user_logs
ADD COLUMN IF NOT EXISTS session_id VARCHAR(255),
ADD COLUMN IF NOT EXISTS user_agent TEXT,
ADD COLUMN IF NOT EXISTS response_time INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS request_size INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS response_size INTEGER DEFAULT 0;

-- 创建新索引
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_logs_session_id
ON user_logs (session_id) WHERE session_id IS NOT NULL;

CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_logs_response_time
ON user_logs (response_time) WHERE response_time > 1000;

CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_logs_user_agent
ON user_logs USING gin(to_tsvector('english', user_agent))
WHERE user_agent IS NOT NULL;

-- 更新现有数据（模拟数据）
UPDATE user_logs
SET
    response_time = FLOOR(RANDOM() * 2000 + 100),
    request_size = FLOOR(RANDOM() * 10000 + 500),
    response_size = FLOOR(RANDOM() * 50000 + 1000)
WHERE response_time = 0;

-- 提交事务
COMMIT;

-- 验证迁移结果
SELECT
    COUNT(*) as total_records,
    COUNT(DISTINCT user_id) as unique_users,
    AVG(response_time) as avg_response_time,
    MAX(response_time) as max_response_time,
    COUNT(*) FILTER (WHERE session_id IS NOT NULL) as records_with_session
FROM user_logs;

-- 更新迁移日志
UPDATE migration_log
SET execution_time_ms = EXTRACT(EPOCH FROM (CURRENT_TIMESTAMP - executed_at)) * 1000
WHERE version = '001' AND execution_time_ms IS NULL;`,
                'test_queries.sql': `-- 数据库优化测试脚本
-- 生成时间: 2024-01-21 16:25:00
-- Agent: GPT-4 Turbo
-- 文件类型: 测试脚本

-- 测试索引性能
-- 测试1: 基础查询性能测试
EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON)
SELECT user_id, action, created_at
FROM user_logs
WHERE created_at > CURRENT_DATE - INTERVAL '7 days'
ORDER BY created_at DESC
LIMIT 100;

-- 测试2: 复合索引效果测试
EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON)
SELECT COUNT(*)
FROM user_logs
WHERE created_at > CURRENT_DATE - INTERVAL '30 days'
  AND user_id IN (SELECT user_id FROM users WHERE active = true);

-- 测试3: 统计查询性能测试
EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON)
SELECT
    DATE(created_at) as log_date,
    action,
    COUNT(*) as action_count
FROM user_logs
WHERE created_at >= CURRENT_DATE - INTERVAL '30 days'
GROUP BY DATE(created_at), action
ORDER BY log_date DESC, action_count DESC;

-- 性能基准测试
-- 执行前记录时间
SELECT CURRENT_TIMESTAMP as test_start_time;

-- 批量插入测试数据
INSERT INTO user_logs (user_id, action, created_at, ip_address)
SELECT
    (RANDOM() * 1000)::INTEGER as user_id,
    (ARRAY['login', 'logout', 'page_view', 'api_call', 'download'])[FLOOR(RANDOM() * 5 + 1)] as action,
    CURRENT_TIMESTAMP - (RANDOM() * INTERVAL '30 days') as created_at,
    INET '192.168.1.1' + (RANDOM() * 255)::INTEGER as ip_address
FROM generate_series(1, 10000);

-- 执行后记录时间
SELECT CURRENT_TIMESTAMP as test_end_time;

-- 验证数据完整性
SELECT
    COUNT(*) as total_records,
    COUNT(DISTINCT user_id) as unique_users,
    MIN(created_at) as earliest_log,
    MAX(created_at) as latest_log
FROM user_logs;`,
                'README.md': `# 数据库优化项目

## 项目概述
本项目由AI Agent自动生成，用于优化user_logs表的查询性能。

## 生成文件说明

### 1. user_logs_idx.sql
- **用途**: 数据库索引优化脚本
- **功能**: 创建复合索引、覆盖索引、部分索引
- **预期效果**: 查询性能提升60%

### 2. optimized_queries.sql
- **用途**: 查询语句优化
- **功能**: 重写慢查询，优化统计查询
- **特点**: 包含性能对比和执行计划

### 3. migration_001.sql
- **用途**: 数据库迁移脚本
- **功能**: 表结构升级，添加新字段
- **安全性**: 包含事务控制和回滚机制

### 4. test_queries.sql
- **用途**: 性能测试脚本
- **功能**: 验证优化效果，性能基准测试
- **输出**: 详细的执行计划和性能指标

## 执行顺序

1. **备份数据**: 执行migration_001.sql中的备份部分
2. **创建索引**: 执行user_logs_idx.sql
3. **测试性能**: 执行test_queries.sql验证效果
4. **应用优化**: 使用optimized_queries.sql中的优化查询

## 性能指标

| 指标 | 优化前 | 优化后 | 提升 |
|------|--------|--------|------|
| 查询时间 | 2.5秒 | 0.8秒 | 68% |
| 扫描行数 | 1,000,000 | 50,000 | 95% |
| 内存使用 | 256MB | 64MB | 75% |

## 注意事项

⚠️ **重要提醒**:
- 在生产环境执行前，请先在测试环境验证
- 建议在业务低峰期执行索引创建
- 执行前请确保有足够的磁盘空间
- 建议先备份相关数据

## Agent信息

- **生成时间**: 2024-01-21 16:20:00
- **Agent版本**: GPT-4 Turbo
- **任务ID**: task-003
- **预计执行时间**: 15分钟
- **预计成本**: $2.50

## 联系方式

如有问题，请联系开发团队或查看系统日志。`
            };

            return fileContents[fileName] || `-- ${fileName} 文件内容\n-- 文件未找到或内容为空`;
        }

        function switchModalTab(fileName) {
            console.log(`切换到文件: ${fileName}`);

            // 更新标签页样式
            const tabs = document.querySelectorAll('#modal-editor-tabs > div');
            tabs.forEach(tab => {
                tab.classList.remove('bg-card');
                tab.classList.add('hover:bg-accent');
            });

            // 激活当前标签页
            event.target.closest('div').classList.remove('hover:bg-accent');
            event.target.closest('div').classList.add('bg-card');

            // 更新Monaco Editor内容
            if (modalMonacoEditor) {
                const content = getDefaultFileContent(fileName);
                modalMonacoEditor.setValue(content);

                // 根据文件扩展名设置语言
                const language = getLanguageFromFileName(fileName);
                monaco.editor.setModelLanguage(modalMonacoEditor.getModel(), language);

                // 设置当前文件名
                window.currentModalFileName = fileName;
            }

            addModalLog(`[${new Date().toLocaleTimeString()}] 切换到文件: ${fileName}`, 'info');
        }

        function getLanguageFromFileName(fileName) {
            const extension = fileName.split('.').pop().toLowerCase();
            const languageMap = {
                'sql': 'sql',
                'js': 'javascript',
                'ts': 'typescript',
                'tsx': 'typescript',
                'jsx': 'javascript',
                'py': 'python',
                'java': 'java',
                'cpp': 'cpp',
                'c': 'c',
                'cs': 'csharp',
                'php': 'php',
                'rb': 'ruby',
                'go': 'go',
                'rs': 'rust',
                'html': 'html',
                'css': 'css',
                'scss': 'scss',
                'json': 'json',
                'xml': 'xml',
                'yaml': 'yaml',
                'yml': 'yaml',
                'md': 'markdown',
                'sh': 'shell',
                'bat': 'bat'
            };

            return languageMap[extension] || 'plaintext';
        }

        function saveCurrentFile() {
            if (modalMonacoEditor && window.currentModalFileName) {
                const content = modalMonacoEditor.getValue();
                console.log(`保存文件: ${window.currentModalFileName}`);
                addModalLog(`[${new Date().toLocaleTimeString()}] 文件已保存: ${window.currentModalFileName}`, 'success');
                alert(`文件 ${window.currentModalFileName} 已保存`);
            }
        }

        function formatCode() {
            if (modalMonacoEditor) {
                modalMonacoEditor.getAction('editor.action.formatDocument').run();
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 代码已格式化`, 'info');
            }
        }

        // VSCode界面管理函数
        function switchVSCodePanel(panelName) {
            // 更新活动栏按钮状态和指示器
            const buttons = ['explorer-btn', 'search-btn', 'git-btn', 'debug-btn', 'extensions-btn'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                const indicator = document.getElementById(btnId.replace('-btn', '-indicator'));
                if (btn && indicator) {
                    if (btnId === `${panelName}-btn`) {
                        btn.classList.remove('text-gray-300');
                        btn.classList.add('bg-gray-700', 'text-white');
                        indicator.classList.remove('hidden');
                    } else {
                        btn.classList.remove('bg-gray-700', 'text-white');
                        btn.classList.add('text-gray-300');
                        indicator.classList.add('hidden');
                    }
                }
            });

            // 显示对应面板
            const panels = ['explorer-panel', 'search-panel', 'git-panel', 'debug-panel', 'extensions-panel'];
            panels.forEach(panel => {
                const element = document.getElementById(panel);
                if (element) {
                    if (panel === `${panelName}-panel`) {
                        element.classList.remove('hidden');
                        element.classList.add('flex');
                    } else {
                        element.classList.add('hidden');
                        element.classList.remove('flex');
                    }
                }
            });

            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 切换到${panelName}面板`, 'info');
        }

        function toggleVSCodeFolder(element) {
            const folderContent = element.nextElementSibling;
            const folderIcon = element.querySelector('.folder-icon');

            if (folderContent) {
                if (folderContent.classList.contains('hidden')) {
                    folderContent.classList.remove('hidden');
                    // 更新图标为展开状态
                    folderIcon.innerHTML = '<path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>';
                } else {
                    folderContent.classList.add('hidden');
                    // 更新图标为折叠状态
                    folderIcon.innerHTML = '<path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>';
                }
            }
        }

        function openVSCodeFile(fileName) {
            console.log(`打开VSCode文件: ${fileName}`);

            // 更新编辑器内容
            if (modalMonacoEditor) {
                const content = getDefaultFileContent(fileName);
                modalMonacoEditor.setValue(content);

                // 根据文件扩展名设置语言
                const language = getLanguageFromFileName(fileName);
                monaco.editor.setModelLanguage(modalMonacoEditor.getModel(), language);

                // 更新菜单栏语言显示
                const languageDisplay = document.getElementById('editor-language');
                if (languageDisplay) {
                    languageDisplay.textContent = language.toUpperCase();
                }

                // 更新状态栏语言显示
                const languageStatus = document.getElementById('editor-language-status');
                if (languageStatus) {
                    languageStatus.textContent = language.toUpperCase();
                }

                // 设置当前文件名
                window.currentVSCodeFile = fileName;

                // 重置光标位置
                updateStatusBar(1, 1);
            }

            // 更新标签页
            updateVSCodeTabs(fileName);

            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 打开文件: ${fileName} (${getLanguageFromFileName(fileName)})`, 'info');
        }

        function updateVSCodeTabs(fileName) {
            const tabsContainer = document.getElementById('vscode-editor-tabs');
            if (tabsContainer) {
                // 获取文件图标
                const fileIcon = getFileIcon(fileName);

                tabsContainer.innerHTML = `
                    <div class="flex items-center space-x-2 px-4 py-2 bg-gray-850 border-r border-gray-700 cursor-pointer" onclick="switchVSCodeTab('${fileName}')">
                        ${fileIcon}
                        <span class="text-sm text-gray-200">${fileName}</span>
                        <button class="text-gray-400 hover:text-gray-200" onclick="closeVSCodeTab('${fileName}')">×</button>
                    </div>
                `;
            }
        }

        function getFileIcon(fileName) {
            const extension = fileName.split('.').pop().toLowerCase();
            const iconMap = {
                'sql': '<svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/></svg>',
                'js': '<svg class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/></svg>',
                'ts': '<svg class="w-3 h-3 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/></svg>',
                'md': '<svg class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/></svg>',
                'default': '<svg class="w-3 h-3 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/></svg>'
            };

            return iconMap[extension] || iconMap['default'];
        }

        function switchVSCodeTab(fileName) {
            openVSCodeFile(fileName);
        }

        function closeVSCodeTab(fileName) {
            console.log(`关闭VSCode标签页: ${fileName}`);
            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 关闭文件: ${fileName}`, 'info');
        }

        function switchBottomPanel(panelName) {
            // 更新标签页状态
            const tabs = ['ai-agent-tab', 'terminal-tab', 'output-tab', 'debug-tab', 'problems-tab'];
            tabs.forEach(tab => {
                const element = document.getElementById(tab);
                if (element) {
                    if (tab === `${panelName}-tab`) {
                        element.style.backgroundColor = 'var(--vscode-tab-active-bg)';
                        element.style.color = 'var(--vscode-editor-fg)';
                        element.style.borderRight = '1px solid var(--vscode-tab-border)';
                    } else {
                        element.style.backgroundColor = 'transparent';
                        element.style.color = 'var(--vscode-activitybar-inactive-fg)';
                        element.style.borderRight = 'none';
                    }
                }
            });

            // 显示对应面板
            const panels = ['ai-agent-panel', 'terminal-panel', 'output-panel', 'debug-panel', 'problems-panel'];
            panels.forEach(panel => {
                const element = document.getElementById(panel);
                if (element) {
                    if (panel === `${panelName}-panel`) {
                        element.classList.remove('hidden');
                    } else {
                        element.classList.add('hidden');
                    }
                }
            });

            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 切换到${panelName}面板`, 'info');
        }

        function addVSCodeTerminalLog(message, type = 'info') {
            const terminalPanel = document.getElementById('terminal-panel');
            if (terminalPanel) {
                const logEntry = document.createElement('div');
                const colorMap = {
                    'info': 'text-gray-300',
                    'success': 'text-green-400',
                    'warning': 'text-yellow-400',
                    'error': 'text-red-400'
                };
                logEntry.className = colorMap[type] || 'text-gray-300';
                logEntry.textContent = message;

                // 在最后一行之前插入
                const lastLine = terminalPanel.querySelector('.text-blue-400');
                if (lastLine) {
                    terminalPanel.insertBefore(logEntry, lastLine);
                } else {
                    terminalPanel.appendChild(logEntry);
                }

                terminalPanel.scrollTop = terminalPanel.scrollHeight;
            }
        }

        function saveVSCodeFile() {
            if (modalMonacoEditor && window.currentVSCodeFile) {
                const content = modalMonacoEditor.getValue();
                console.log(`保存VSCode文件: ${window.currentVSCodeFile}`);
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 文件已保存: ${window.currentVSCodeFile}`, 'success');

                // 更新输出面板
                const outputPanel = document.getElementById('output-panel');
                if (outputPanel) {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'text-green-400';
                    logEntry.textContent = `文件保存成功: ${window.currentVSCodeFile}`;
                    outputPanel.appendChild(logEntry);
                }

                // 更新文件状态为已保存
                updateFileStatus(window.currentVSCodeFile, 'saved');
            }
        }

        // Monaco Editor 辅助函数
        function updateFileStatus(fileName, status) {
            // 更新标签页显示状态
            const tabs = document.querySelectorAll('#vscode-editor-tabs > div');
            tabs.forEach(tab => {
                const tabText = tab.querySelector('span');
                if (tabText && tabText.textContent === fileName) {
                    if (status === 'modified') {
                        if (!tabText.textContent.includes('●')) {
                            tabText.textContent = '● ' + fileName;
                        }
                    } else if (status === 'saved') {
                        tabText.textContent = fileName;
                    }
                }
            });
        }

        function updateStatusBar(line, column) {
            // 更新VSCode状态栏的光标位置
            const cursorPosition = document.getElementById('cursor-position');
            if (cursorPosition) {
                cursorPosition.textContent = `行 ${line}, 列 ${column}`;
            }

            // 在终端面板也显示光标位置
            const terminalPanel = document.getElementById('terminal-panel');
            if (terminalPanel) {
                let statusLine = terminalPanel.querySelector('.status-line');
                if (!statusLine) {
                    statusLine = document.createElement('div');
                    statusLine.className = 'status-line text-blue-400 text-xs';
                    terminalPanel.appendChild(statusLine);
                }
                statusLine.textContent = `光标位置: 行 ${line}, 列 ${column}`;
            }
        }

        // VSCode菜单功能
        function openVSCodeMenu(menuName) {
            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 打开${menuName}菜单`, 'info');

            const menus = {
                'file': ['新建文件', '打开文件', '保存', '另存为', '关闭'],
                'edit': ['撤销', '重做', '剪切', '复制', '粘贴', '查找', '替换'],
                'view': ['命令面板', '资源管理器', '搜索', '源代码管理', '运行和调试'],
                'go': ['转到文件', '转到行', '转到符号', '转到定义'],
                'run': ['启动调试', '运行而不调试', '停止', '重启'],
                'terminal': ['新建终端', '拆分终端', '清除终端'],
                'help': ['欢迎', '文档', '键盘快捷键', '关于']
            };

            const menuItems = menus[menuName] || [];
            console.log(`${menuName}菜单项:`, menuItems);
        }

        // VSCode设置和账户
        function openVSCodeSettings() {
            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 打开VSCode设置`, 'info');
            alert('VSCode设置面板');
        }

        function openVSCodeAccount() {
            addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 打开账户设置`, 'info');
            alert('账户设置');
        }

        // AI Agent相关功能函数
        function pauseAIAgent() {
            if (confirm('确定要暂停AI Agent吗？')) {
                addAIAgentLog('USER', '用户请求暂停AI Agent');
                addAIAgentLog('PAUSE', 'AI Agent已暂停，等待用户指令');

                // 更新状态指示器
                const statusIndicator = document.querySelector('#ai-agent-panel .animate-pulse');
                if (statusIndicator) {
                    statusIndicator.classList.remove('bg-green-400', 'animate-pulse');
                    statusIndicator.classList.add('bg-yellow-400');
                }

                alert('AI Agent已暂停');
            }
        }

        function addAIAgentLog(type, message) {
            const aiAgentLogs = document.getElementById('ai-agent-logs');
            if (aiAgentLogs) {
                const logContainer = aiAgentLogs.querySelector('.space-y-1');
                if (logContainer) {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'flex items-start space-x-2';

                    const timestamp = new Date().toLocaleTimeString();
                    const typeColors = {
                        'INIT': 'text-blue-400',
                        'ANALYZE': 'text-yellow-400',
                        'SUCCESS': 'text-green-400',
                        'SCAN': 'text-blue-400',
                        'WARN': 'text-orange-400',
                        'GEN': 'text-purple-400',
                        'DONE': 'text-green-400',
                        'PERF': 'text-orange-400',
                        'CREATE': 'text-blue-400',
                        'TEST': 'text-yellow-400',
                        'EXEC': 'text-blue-400',
                        'RESULT': 'text-green-400',
                        'DOC': 'text-purple-400',
                        'PROGRESS': 'text-blue-400',
                        'WAIT': 'text-yellow-400',
                        'USER': 'text-cyan-400',
                        'PAUSE': 'text-red-400',
                        'RESUME': 'text-green-400',
                        'ERROR': 'text-red-400'
                    };

                    const typeColor = typeColors[type] || 'text-gray-400';

                    logEntry.innerHTML = `
                        <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[${timestamp}]</span>
                        <span class="${typeColor} text-xs w-16 flex-shrink-0">[${type}]</span>
                        <span class="text-sm">${message}</span>
                    `;

                    logContainer.appendChild(logEntry);

                    // 自动滚动到底部
                    aiAgentLogs.scrollTop = aiAgentLogs.scrollHeight;
                }
            }
        }

        // 模拟AI Agent实时日志更新
        function startAIAgentLogSimulation() {
            const logMessages = [
                { type: 'ANALYZE', message: '正在分析代码复杂度...' },
                { type: 'SCAN', message: '扫描依赖关系: package.json' },
                { type: 'GEN', message: '生成类型定义文件: types.d.ts' },
                { type: 'TEST', message: '运行单元测试: 23/25 通过' },
                { type: 'PERF', message: '性能分析: 内存使用优化15%' },
                { type: 'DOC', message: '更新API文档: 新增3个接口' },
                { type: 'PROGRESS', message: '当前进度: 70% - 即将完成' }
            ];

            let messageIndex = 0;
            window.aiAgentLogInterval = setInterval(() => {
                if (messageIndex < logMessages.length) {
                    const log = logMessages[messageIndex];
                    addAIAgentLog(log.type, log.message);
                    messageIndex++;
                } else {
                    // 重新开始循环
                    messageIndex = 0;
                }
            }, 5000); // 每5秒添加一条新日志
        }

        // 更新initVSCodeInterface函数
        function initVSCodeInterface() {
            // 设置默认激活的面板
            switchVSCodePanel('explorer');
            switchBottomPanel('ai-agent'); // 默认显示AI Agent面板

            // 设置当前文件
            window.currentVSCodeFile = 'user_logs_idx.sql';

            // 开始AI Agent日志模拟
            startAIAgentLogSimulation();
        }

        // 增强的格式化功能
        function formatCode() {
            if (modalMonacoEditor) {
                modalMonacoEditor.getAction('editor.action.formatDocument').run();
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 代码已格式化`, 'info');

                // 显示格式化结果
                const outputPanel = document.getElementById('output-panel');
                if (outputPanel) {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'text-blue-400';
                    logEntry.textContent = `代码格式化完成: ${window.currentVSCodeFile}`;
                    outputPanel.appendChild(logEntry);
                }
            }
        }

        // Monaco Editor 主题切换
        function switchMonacoTheme(theme) {
            if (modalMonacoEditor) {
                monaco.editor.setTheme(theme);
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 主题已切换为: ${theme}`, 'info');
            }
        }

        // Monaco Editor 语言切换
        function switchMonacoLanguage(language) {
            if (modalMonacoEditor) {
                monaco.editor.setModelLanguage(modalMonacoEditor.getModel(), language);
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] 语言模式已切换为: ${language}`, 'info');
            }
        }

        // 获取编辑器统计信息
        function getEditorStats() {
            if (modalMonacoEditor) {
                const model = modalMonacoEditor.getModel();
                const lineCount = model.getLineCount();
                const characterCount = model.getValueLength();
                const selection = modalMonacoEditor.getSelection();
                const selectedText = model.getValueInRange(selection);

                return {
                    lines: lineCount,
                    characters: characterCount,
                    selectedCharacters: selectedText.length,
                    language: model.getLanguageId()
                };
            }
            return null;
        }

        // 显示编辑器统计信息
        function showEditorStats() {
            const stats = getEditorStats();
            if (stats) {
                const message = `文件统计 - 行数: ${stats.lines}, 字符数: ${stats.characters}, 语言: ${stats.language}`;
                addVSCodeTerminalLog(`[${new Date().toLocaleTimeString()}] ${message}`, 'info');

                // 在输出面板显示详细统计
                const outputPanel = document.getElementById('output-panel');
                if (outputPanel) {
                    const logEntry = document.createElement('div');
                    logEntry.className = 'text-gray-300';
                    logEntry.innerHTML = `
                        <div>文件: ${window.currentVSCodeFile}</div>
                        <div>行数: ${stats.lines}</div>
                        <div>字符数: ${stats.characters}</div>
                        <div>语言: ${stats.language}</div>
                        <div>已选择: ${stats.selectedCharacters} 字符</div>
                    `;
                    outputPanel.appendChild(logEntry);
                }
            }
        }

        function pauseTaskFromModal(taskId) {
            if (confirm(`确定要暂停任务 ${taskId} 吗？`)) {
                alert(`任务 ${taskId} 已暂停`);
                addModalLog(`[${new Date().toLocaleTimeString()}] 任务已暂停`, 'warning');
            }
        }

        function stopTaskFromModal(taskId) {
            if (confirm(`确定要停止任务 ${taskId} 吗？已生成的代码将会保留。`)) {
                alert(`任务 ${taskId} 已停止`);
                addModalLog(`[${new Date().toLocaleTimeString()}] 任务已停止`, 'destructive');
                closeTaskDetails();
            }
        }
    </script>

    <!-- 任务开发详情模态框 - 全屏显示 -->
    <div id="task-details-modal" class="fixed inset-0 bg-background hidden z-50">
        <div class="w-full h-full flex flex-col">
                <!-- VSCode标题栏 -->
                <div class="vscode-titlebar flex items-center justify-between px-4 vscode-ui-font" style="background-color: var(--vscode-titlebar-bg); color: var(--vscode-titlebar-fg); border-bottom: 1px solid var(--vscode-activitybar-border);">
                    <div class="flex items-center space-x-3">
                        <!-- 窗口控制按钮 -->
                        <div class="flex items-center space-x-2">
                            <button class="w-3 h-3 bg-red-500 rounded-full hover:bg-red-600" onclick="closeTaskDetails()" title="关闭"></button>
                            <button class="w-3 h-3 bg-yellow-500 rounded-full hover:bg-yellow-600" title="最小化"></button>
                            <button class="w-3 h-3 bg-green-500 rounded-full hover:bg-green-600" title="最大化"></button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span class="text-sm font-medium" id="task-details-title">数据库优化任务 - VSCode开发环境</span>
                            <span class="px-2 py-0.5 bg-green-600 text-white text-xs rounded">运行中</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4 text-xs">
                        <div>Agent: GPT-4 Turbo</div>
                        <div>进度: 65%</div>
                        <div>用时: 8分钟</div>
                    </div>
                </div>

                <!-- VSCode完整编辑器界面 -->
                <div class="flex-1 flex overflow-hidden" style="background-color: var(--vscode-editor-bg);">
                    <!-- 左侧活动栏 -->
                    <div class="vscode-activitybar flex flex-col justify-between vscode-ui-font" style="background-color: var(--vscode-activitybar-bg); border-right: 1px solid var(--vscode-activitybar-border);">
                        <!-- 主要功能按钮 -->
                        <div class="flex flex-col p-1">
                            <button class="w-12 h-12 flex items-center justify-center relative transition-colors duration-150"
                                    style="color: var(--vscode-activitybar-fg);"
                                    onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'"
                                    onmouseout="this.style.backgroundColor='transparent'"
                                    onclick="switchVSCodePanel('explorer')" id="explorer-btn" title="资源管理器 (Ctrl+Shift+E)">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                                </svg>
                                <div class="absolute left-0 top-0 w-0.5 h-full bg-white hidden" id="explorer-indicator"></div>
                            </button>
                            <button class="w-12 h-12 flex items-center justify-center relative transition-colors duration-150"
                                    style="color: var(--vscode-activitybar-inactive-fg);"
                                    onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'; this.style.color='var(--vscode-activitybar-fg)'"
                                    onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                    onclick="switchVSCodePanel('search')" id="search-btn" title="搜索 (Ctrl+Shift+F)">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                                </svg>
                                <div class="absolute left-0 top-0 w-0.5 h-full bg-white hidden" id="search-indicator"></div>
                            </button>
                            <button class="w-12 h-12 flex items-center justify-center relative transition-colors duration-150"
                                    style="color: var(--vscode-activitybar-inactive-fg);"
                                    onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'; this.style.color='var(--vscode-activitybar-fg)'"
                                    onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                    onclick="switchVSCodePanel('git')" id="git-btn" title="源代码管理 (Ctrl+Shift+G)">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M21.007 8.222A3.738 3.738 0 0 0 15.045 5.2a3.737 3.737 0 0 0 1.156 6.583 2.988 2.988 0 0 1-2.668 1.67h-2.99a4.456 4.456 0 0 0-2.989 1.165V7.4a3.737 3.737 0 1 0-1.494 0v9.117a3.776 3.776 0 1 0 1.816.099 2.99 2.99 0 0 1 2.668-1.667h2.99a4.484 4.484 0 0 0 4.223-3.039 3.736 3.736 0 0 0 3.25-3.687zM4.565 3.738a2.242 2.242 0 1 1 4.484 0 2.242 2.242 0 0 1-4.484 0zm4.484 16.441a2.242 2.242 0 1 1-4.484 0 2.242 2.242 0 0 1 4.484 0z"/>
                                </svg>
                                <div class="absolute left-0 top-0 w-0.5 h-full bg-white hidden" id="git-indicator"></div>
                                <div class="absolute top-1 right-1 w-4 h-4 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center">3</div>
                            </button>
                            <button class="w-12 h-12 flex items-center justify-center relative transition-colors duration-150"
                                    style="color: var(--vscode-activitybar-inactive-fg);"
                                    onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'; this.style.color='var(--vscode-activitybar-fg)'"
                                    onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                    onclick="switchVSCodePanel('debug')" id="debug-btn" title="运行和调试 (Ctrl+Shift+D)">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                                <div class="absolute left-0 top-0 w-0.5 h-full bg-white hidden" id="debug-indicator"></div>
                            </button>
                            <button class="w-12 h-12 flex items-center justify-center relative transition-colors duration-150"
                                    style="color: var(--vscode-activitybar-inactive-fg);"
                                    onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'; this.style.color='var(--vscode-activitybar-fg)'"
                                    onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                    onclick="switchVSCodePanel('extensions')" id="extensions-btn" title="扩展 (Ctrl+Shift+X)">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M13.5 1.515a3 3 0 0 0-3 0L3 5.845a2 2 0 0 0-1 1.732v8.846a2 2 0 0 0 1 1.732l7.5 4.33a3 3 0 0 0 3 0l7.5-4.33a2 2 0 0 0 1-1.732V7.577a2 2 0 0 0-1-1.732L13.5 1.515z"/>
                                </svg>
                                <div class="absolute left-0 top-0 w-0.5 h-full bg-white hidden" id="extensions-indicator"></div>
                            </button>
                        </div>

                        <!-- 底部功能按钮 -->
                        <div class="flex flex-col space-y-1 p-1">
                            <button class="w-10 h-10 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded"
                                    onclick="openVSCodeSettings()" title="设置">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <button class="w-10 h-10 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded"
                                    onclick="openVSCodeAccount()" title="账户">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- 侧边栏面板 -->
                    <div class="vscode-sidebar flex flex-col vscode-ui-font vscode-scrollbar" style="background-color: var(--vscode-sidebar-bg); border-right: 1px solid var(--vscode-sidebar-border); color: var(--vscode-sidebar-fg);" id="vscode-sidebar">
                        <!-- 资源管理器面板 -->
                        <div id="explorer-panel" class="flex-1 flex flex-col">
                            <div class="flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800">
                                <h3 class="text-sm font-medium text-gray-200 uppercase tracking-wide">资源管理器</h3>
                                <div class="flex items-center space-x-1">
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" title="新建文件">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" title="新建文件夹">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
                                        </svg>
                                    </button>
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" title="刷新">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" title="折叠全部">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="flex-1 overflow-y-auto">
                                <!-- 项目文件树 -->
                                <div class="p-2">
                                    <div class="text-xs text-gray-400 uppercase tracking-wide mb-2">AI开发平台</div>
                                    <div class="space-y-1" id="vscode-file-tree">
                                        <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="toggleVSCodeFolder(this)">
                                            <svg class="w-3 h-3 text-gray-400 folder-icon" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
                                            </svg>
                                            <span class="text-sm text-gray-300">src</span>
                                        </div>
                                        <div class="folder-content ml-4 space-y-1">
                                            <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="openVSCodeFile('user_logs_idx.sql')">
                                                <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
                                                </svg>
                                                <span class="text-sm text-gray-300">user_logs_idx.sql</span>
                                            </div>
                                            <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="openVSCodeFile('optimized_queries.sql')">
                                                <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
                                                </svg>
                                                <span class="text-sm text-gray-300">optimized_queries.sql</span>
                                            </div>
                                            <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="openVSCodeFile('migration_001.sql')">
                                                <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
                                                </svg>
                                                <span class="text-sm text-gray-300">migration_001.sql</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="toggleVSCodeFolder(this)">
                                            <svg class="w-3 h-3 text-gray-400 folder-icon" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
                                            </svg>
                                            <span class="text-sm text-gray-300">tests</span>
                                        </div>
                                        <div class="folder-content ml-4 space-y-1 hidden">
                                            <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="openVSCodeFile('test_queries.sql')">
                                                <svg class="w-3 h-3 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
                                                </svg>
                                                <span class="text-sm text-gray-300">test_queries.sql</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-1 py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" onclick="openVSCodeFile('README.md')">
                                            <svg class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-sm text-gray-300">README.md</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 搜索面板 -->
                        <div id="search-panel" class="flex-1 flex-col hidden">
                            <div class="p-3 border-b border-gray-700 bg-gray-800">
                                <h3 class="text-sm font-medium text-gray-200 uppercase tracking-wide">搜索</h3>
                            </div>
                            <div class="p-3">
                                <input type="text" placeholder="搜索" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-gray-200 placeholder-gray-400 focus:outline-none focus:border-blue-500">
                                <input type="text" placeholder="替换" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-sm text-gray-200 placeholder-gray-400 focus:outline-none focus:border-blue-500 mt-2">
                            </div>
                        </div>

                        <!-- Git面板 -->
                        <div id="git-panel" class="flex-1 flex-col hidden">
                            <div class="p-3 border-b border-gray-700 bg-gray-800">
                                <h3 class="text-sm font-medium text-gray-200 uppercase tracking-wide">源代码管理</h3>
                            </div>
                            <div class="p-3">
                                <div class="text-sm text-gray-300 mb-2">更改 (3)</div>
                                <div class="space-y-1">
                                    <div class="flex items-center space-x-2 py-1 px-2 hover:bg-gray-700 rounded">
                                        <span class="text-green-400 text-xs">M</span>
                                        <span class="text-sm text-gray-300">user_logs_idx.sql</span>
                                    </div>
                                    <div class="flex items-center space-x-2 py-1 px-2 hover:bg-gray-700 rounded">
                                        <span class="text-green-400 text-xs">A</span>
                                        <span class="text-sm text-gray-300">optimized_queries.sql</span>
                                    </div>
                                    <div class="flex items-center space-x-2 py-1 px-2 hover:bg-gray-700 rounded">
                                        <span class="text-green-400 text-xs">A</span>
                                        <span class="text-sm text-gray-300">migration_001.sql</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 主编辑区域 -->
                    <div class="flex-1 flex flex-col">
                        <!-- VSCode菜单栏 -->
                        <div class="flex items-center justify-between h-8 px-4 bg-gray-800 border-b border-gray-700">
                            <div class="flex items-center space-x-6">
                                <div class="flex items-center space-x-4">
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('file')">文件</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('edit')">编辑</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('view')">查看</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('go')">转到</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('run')">运行</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('terminal')">终端</button>
                                    <button class="text-xs text-gray-300 hover:text-white hover:bg-gray-700 px-2 py-1 rounded" onclick="openVSCodeMenu('help')">帮助</button>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xs text-gray-400" id="editor-language">SQL</span>
                                    <span class="text-xs text-gray-500">|</span>
                                    <span class="text-xs text-gray-400">UTF-8</span>
                                    <span class="text-xs text-gray-500">|</span>
                                    <span class="text-xs text-gray-400">LF</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" onclick="formatCode()" title="格式化代码 (Alt+Shift+F)">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded" onclick="saveVSCodeFile()" title="保存文件 (Ctrl+S)">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 编辑器标签页 -->
                        <div class="flex vscode-ui-font" style="background-color: var(--vscode-tab-inactive-bg); border-bottom: 1px solid var(--vscode-tab-border);" id="vscode-editor-tabs">
                            <div class="vscode-tab flex items-center px-3 py-2 cursor-pointer border-r"
                                 style="background-color: var(--vscode-tab-active-bg); border-right: 1px solid var(--vscode-tab-border); color: var(--vscode-editor-fg);"
                                 onclick="switchVSCodeTab('user_logs_idx.sql')">
                                <svg class="w-4 h-4 mr-2 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                <span class="text-sm mr-2">user_logs_idx.sql</span>
                                <button class="w-4 h-4 flex items-center justify-center rounded hover:bg-gray-600 transition-colors duration-150"
                                        style="color: var(--vscode-activitybar-inactive-fg);"
                                        onmouseover="this.style.backgroundColor='var(--vscode-list-hover-bg)'"
                                        onmouseout="this.style.backgroundColor='transparent'"
                                        onclick="event.stopPropagation(); closeVSCodeTab('user_logs_idx.sql')"
                                        title="关闭 (Ctrl+W)">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Monaco Editor -->
                        <div id="vscode-monaco-editor" class="flex-1 bg-gray-900">
                            <!-- Monaco Editor 将在这里初始化 -->
                        </div>

                        <!-- 底部面板 -->
                        <div class="h-64 flex flex-col" style="background-color: var(--vscode-panel-bg); border-top: 1px solid var(--vscode-panel-border);" id="vscode-bottom-panel">
                            <!-- 底部面板标签页 -->
                            <div class="flex vscode-ui-font" style="background-color: var(--vscode-tab-inactive-bg); border-bottom: 1px solid var(--vscode-tab-border);">
                                <button class="px-4 py-2 text-sm transition-colors duration-150"
                                        style="background-color: var(--vscode-tab-active-bg); color: var(--vscode-editor-fg); border-right: 1px solid var(--vscode-tab-border);"
                                        onclick="switchBottomPanel('ai-agent')" id="ai-agent-tab">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                        <span>AI Agent</span>
                                    </div>
                                </button>
                                <button class="px-4 py-2 text-sm transition-colors duration-150"
                                        style="color: var(--vscode-activitybar-inactive-fg);"
                                        onmouseover="this.style.color='var(--vscode-editor-fg)'"
                                        onmouseout="this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                        onclick="switchBottomPanel('terminal')" id="terminal-tab">
                                    终端
                                </button>
                                <button class="px-4 py-2 text-sm transition-colors duration-150"
                                        style="color: var(--vscode-activitybar-inactive-fg);"
                                        onmouseover="this.style.color='var(--vscode-editor-fg)'"
                                        onmouseout="this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                        onclick="switchBottomPanel('output')" id="output-tab">
                                    输出
                                </button>
                                <button class="px-4 py-2 text-sm transition-colors duration-150"
                                        style="color: var(--vscode-activitybar-inactive-fg);"
                                        onmouseover="this.style.color='var(--vscode-editor-fg)'"
                                        onmouseout="this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                        onclick="switchBottomPanel('debug')" id="debug-tab">
                                    调试控制台
                                </button>
                                <button class="px-4 py-2 text-sm transition-colors duration-150"
                                        style="color: var(--vscode-activitybar-inactive-fg);"
                                        onmouseover="this.style.color='var(--vscode-editor-fg)'"
                                        onmouseout="this.style.color='var(--vscode-activitybar-inactive-fg)'"
                                        onclick="switchBottomPanel('problems')" id="problems-tab">
                                    问题
                                </button>
                            </div>

                            <!-- AI Agent面板 -->
                            <div id="ai-agent-panel" class="flex-1 flex flex-col vscode-scrollbar" style="background-color: var(--vscode-panel-bg); color: var(--vscode-editor-fg);">
                                <!-- AI Agent状态栏 -->
                                <div class="flex items-center justify-between p-3 border-b" style="border-color: var(--vscode-panel-border); background-color: var(--vscode-sidebar-bg);">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-sm font-medium">AI Agent 运行状态</span>
                                        </div>
                                        <div class="flex items-center space-x-4 text-xs">
                                            <span style="color: var(--vscode-activitybar-inactive-fg);">模型: GPT-4 Turbo</span>
                                            <span style="color: var(--vscode-activitybar-inactive-fg);">任务: 数据库优化</span>
                                            <span style="color: var(--vscode-activitybar-inactive-fg);">进度: 65%</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="flex items-center space-x-1 text-xs">
                                            <span style="color: var(--vscode-activitybar-inactive-fg);">用时:</span>
                                            <span class="text-green-400 font-mono">08:32</span>
                                        </div>
                                        <div class="flex items-center space-x-1 text-xs">
                                            <span style="color: var(--vscode-activitybar-inactive-fg);">成本:</span>
                                            <span class="text-blue-400 font-mono">$1.20</span>
                                        </div>
                                        <button class="px-2 py-1 text-xs rounded transition-colors duration-150"
                                                style="background-color: var(--vscode-button-bg); color: var(--vscode-statusbar-fg);"
                                                onmouseover="this.style.backgroundColor='var(--vscode-button-hover-bg)'"
                                                onmouseout="this.style.backgroundColor='var(--vscode-button-bg)'"
                                                onclick="pauseAIAgent()">
                                            暂停
                                        </button>
                                    </div>
                                </div>

                                <!-- AI Agent日志内容 -->
                                <div class="flex-1 p-3 overflow-y-auto vscode-font" id="ai-agent-logs">
                                    <div class="space-y-1">
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:15]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[INIT]</span>
                                            <span class="text-sm">AI Agent 初始化完成，开始执行数据库优化任务</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:18]</span>
                                            <span class="text-yellow-400 text-xs w-16 flex-shrink-0">[ANALYZE]</span>
                                            <span class="text-sm">正在分析数据库结构和性能瓶颈...</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:22]</span>
                                            <span class="text-green-400 text-xs w-16 flex-shrink-0">[SUCCESS]</span>
                                            <span class="text-sm">数据库连接成功，开始性能分析</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:25]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[SCAN]</span>
                                            <span class="text-sm">扫描表结构: user_logs (1,234,567 行)</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:28]</span>
                                            <span class="text-orange-400 text-xs w-16 flex-shrink-0">[WARN]</span>
                                            <span class="text-sm">发现性能瓶颈: user_logs表缺少created_at索引</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:32]</span>
                                            <span class="text-purple-400 text-xs w-16 flex-shrink-0">[GEN]</span>
                                            <span class="text-sm">正在生成索引优化脚本: user_logs_idx.sql</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:35]</span>
                                            <span class="text-green-400 text-xs w-16 flex-shrink-0">[DONE]</span>
                                            <span class="text-sm">索引优化脚本生成完成 (247 行代码)</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:38]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[ANALYZE]</span>
                                            <span class="text-sm">分析慢查询: SELECT * FROM user_logs WHERE created_at > ?</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:42]</span>
                                            <span class="text-orange-400 text-xs w-16 flex-shrink-0">[PERF]</span>
                                            <span class="text-sm">查询性能: 2.5秒 → 预计优化后: 0.8秒 (68%提升)</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:45]</span>
                                            <span class="text-purple-400 text-xs w-16 flex-shrink-0">[GEN]</span>
                                            <span class="text-sm">正在重写查询语句: optimized_queries.sql</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:48]</span>
                                            <span class="text-green-400 text-xs w-16 flex-shrink-0">[DONE]</span>
                                            <span class="text-sm">查询优化完成，预计性能提升60%</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:52]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[CREATE]</span>
                                            <span class="text-sm">正在生成数据库迁移文件: migration_001.sql</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:55]</span>
                                            <span class="text-yellow-400 text-xs w-16 flex-shrink-0">[TEST]</span>
                                            <span class="text-sm">正在运行性能测试: test_queries.sql</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:20:58]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[EXEC]</span>
                                            <span class="text-sm">执行测试查询: EXPLAIN ANALYZE SELECT...</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:21:02]</span>
                                            <span class="text-green-400 text-xs w-16 flex-shrink-0">[RESULT]</span>
                                            <span class="text-sm">测试结果: 扫描行数 1,000,000 → 50,000 (95%减少)</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:21:05]</span>
                                            <span class="text-purple-400 text-xs w-16 flex-shrink-0">[DOC]</span>
                                            <span class="text-sm">正在生成项目文档: README.md</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:21:08]</span>
                                            <span class="text-blue-400 text-xs w-16 flex-shrink-0">[PROGRESS]</span>
                                            <span class="text-sm">当前进度: 65% - 正在进行最终验证...</span>
                                        </div>
                                        <div class="flex items-start space-x-2">
                                            <span class="text-xs text-gray-500 font-mono w-20 flex-shrink-0">[16:21:11]</span>
                                            <span class="text-yellow-400 text-xs w-16 flex-shrink-0">[WAIT]</span>
                                            <span class="text-sm flex items-center">
                                                等待用户确认优化方案...
                                                <div class="ml-2 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></div>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 终端面板 -->
                            <div id="terminal-panel" class="flex-1 p-3 vscode-font text-sm overflow-y-auto hidden vscode-scrollbar" style="background-color: var(--vscode-panel-bg); color: var(--vscode-editor-fg);">
                                <div class="text-green-400">$ Agent执行日志</div>
                                <div class="text-gray-300">[16:20:15] 任务开始执行：数据库优化任务</div>
                                <div class="text-gray-300">[16:20:18] 正在分析数据库结构...</div>
                                <div class="text-green-400">[16:20:22] 数据库连接成功</div>
                                <div class="text-gray-300">[16:20:25] 开始分析表结构和索引...</div>
                                <div class="text-yellow-400">[16:20:28] 发现性能瓶颈：user_logs表缺少索引</div>
                                <div class="text-gray-300">[16:20:32] 正在生成优化SQL脚本...</div>
                                <div class="text-green-400">[16:20:35] 生成索引优化脚本：user_logs_idx.sql</div>
                                <div class="text-gray-300">[16:20:38] 开始优化查询语句...</div>
                                <div class="text-yellow-400">[16:20:42] 检测到慢查询：SELECT * FROM user_logs WHERE created_at > ?</div>
                                <div class="text-gray-300">[16:20:45] 正在重写查询语句...</div>
                                <div class="text-green-400">[16:20:48] 查询优化完成，预计性能提升60%</div>
                                <div class="text-blue-400">$ _</div>
                            </div>

                            <!-- 输出面板 -->
                            <div id="output-panel" class="flex-1 p-3 vscode-font text-sm overflow-y-auto hidden vscode-scrollbar" style="background-color: var(--vscode-panel-bg); color: var(--vscode-editor-fg);">
                                <div style="color: var(--vscode-sidebar-fg);">Agent输出日志:</div>
                                <div style="color: var(--vscode-sidebar-fg);">正在执行数据库优化任务...</div>
                                <div class="text-green-400">索引创建成功</div>
                                <div class="text-green-400">查询优化完成</div>
                            </div>

                            <!-- 调试控制台面板 -->
                            <div id="debug-panel" class="flex-1 p-3 vscode-font text-sm overflow-y-auto hidden vscode-scrollbar" style="background-color: var(--vscode-panel-bg); color: var(--vscode-editor-fg);">
                                <div style="color: var(--vscode-sidebar-fg);">调试信息:</div>
                                <div class="text-blue-400">断点: user_logs_idx.sql:15</div>
                                <div class="text-yellow-400">变量: table_name = 'user_logs'</div>
                            </div>

                            <!-- 问题面板 -->
                            <div id="problems-panel" class="flex-1 p-3 text-sm overflow-y-auto hidden vscode-scrollbar" style="background-color: var(--vscode-panel-bg); color: var(--vscode-editor-fg);">
                                <div style="color: var(--vscode-sidebar-fg);">问题 (0)</div>
                                <div style="color: var(--vscode-activitybar-inactive-fg);" class="mt-2">没有发现问题</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VSCode状态栏 -->
                <div class="vscode-statusbar px-4 flex items-center justify-between vscode-ui-font" style="background-color: var(--vscode-statusbar-bg); color: var(--vscode-statusbar-fg); border-top: 1px solid var(--vscode-panel-border); font-size: 12px;">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-1">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633z" clip-rule="evenodd"/>
                            </svg>
                            <span>main</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                            <span>0</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            <span>0</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span>Agent运行中</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span id="cursor-position">行 1, 列 1</span>
                        <span>空格: 4</span>
                        <span id="editor-encoding">UTF-8</span>
                        <span id="editor-eol">LF</span>
                        <span id="editor-language-status">SQL</span>
                        <div class="flex items-center space-x-1">
                            <span>进度: 65%</span>
                            <div class="w-16 bg-blue-800 rounded-full h-1">
                                <div class="bg-white h-1 rounded-full" style="width: 65%"></div>
                            </div>
                        </div>
                        <span>8分钟 | $1.20</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
